<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Untitled</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p align="center">
<img src="/images/logo.png" alt="">
</p>
<h1 align="center">
What the f*ck Python!
</h1>
<p align="center">
An interesting collection of surprising snippets and lesser-known Python features.
</p>
<p><a href="http://www.wtfpl.net"><img src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square" alt="WTFPL 2.0" /></a></p>
<p>Python, being a beautifully designed high-level and interpreter-based programming language, provides us with many features for the programmer’s comfort. But sometimes, the outcomes of a Python snippet may not seem obvious to a regular user at first sight.</p>
<p>Here is a fun project to collect such tricky &amp; counter-intuitive examples and lesser-known features in Python, attempting to discuss what exactly is happening under the hood!</p>
<p>While some of the examples you see below may not be WTFs in the truest sense, but they’ll reveal some of the interesting parts of Python that you might be unaware of. I find it a nice way to learn the internals of a programming language, and I think you’ll find them interesting as well!</p>
<p>If you’re an experienced Python programmer, you can take it as a challenge to get most of them right in first attempt. You may be already familiar with some of these examples, and I might be able to revive sweet old memories of yours being bitten by these gotchas :sweat_smile:</p>
<p>If you’re a returning reader, you can learn about the new modifications <a href="https://github.com/satwikkansal/wtfpython/releases/">here</a>.</p>
<p>So, here we go…</p>
<h1 id="table-of-contents">Table of Contents</h1>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#structure-of-the-examples">Structure of the Examples</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#-examples">👀 Examples</a>
<ul>
<li><a href="#section-strain-your-brain">Section: Strain your brain!</a>
<ul>
<li><a href="#-strings-can-be-tricky-sometimes-">▶ Strings can be tricky sometimes *</a></li>
<li><a href="#-time-for-some-hash-brownies">▶ Time for some hash brownies!</a></li>
<li><a href="#-return-return-everywhere">▶ Return return everywhere!</a></li>
<li><a href="#-deep-down-were-all-the-same-">▶ Deep down, we’re all the same. *</a></li>
<li><a href="#-for-what">▶ For what?</a></li>
<li><a href="#-evaluation-time-discrepancy">▶ Evaluation time discrepancy</a></li>
<li><a href="#-is-is-not-what-it-is">▶ <code>is</code> is not what it is!</a></li>
<li><a href="#-a-tic-tac-toe-where-x-wins-in-the-first-attempt">▶ A tic-tac-toe where X wins in the first attempt!</a></li>
<li><a href="#-the-sticky-output-function">▶ The sticky output function</a></li>
<li><a href="#-is-not--is-not-is-not-">▶ <code>is not ...</code> is not <code>is (not ...)</code></a></li>
<li><a href="#-the-surprising-comma">▶ The surprising comma</a></li>
<li><a href="#-backslashes-at-the-end-of-string">▶ Backslashes at the end of string</a></li>
<li><a href="#-not-knot">▶ not knot!</a></li>
<li><a href="#-half-triple-quoted-strings">▶ Half triple-quoted strings</a></li>
<li><a href="#-midnight-time-doesnt-exist">▶ Midnight time doesn’t exist?</a></li>
<li><a href="#-whats-wrong-with-booleans">▶ What’s wrong with booleans?</a></li>
<li><a href="#-class-attributes-and-instance-attributes">▶ Class attributes and instance attributes</a></li>
<li><a href="#-yielding-none">▶ yielding None</a></li>
<li><a href="#-mutating-the-immutable">▶ Mutating the immutable!</a></li>
<li><a href="#-the-disappearing-variable-from-outer-scope">▶ The disappearing variable from outer scope</a></li>
<li><a href="#-when-true-is-actually-false">▶ When True is actually False</a></li>
<li><a href="#-from-filled-to-none-in-one-instruction">▶ From filled to None in one instruction…</a></li>
<li><a href="#-subclass-relationships-">▶ Subclass relationships *</a></li>
<li><a href="#-the-mysterious-key-type-conversion-">▶ The mysterious key type conversion *</a></li>
<li><a href="#-lets-see-if-you-can-guess-this">▶ Let’s see if you can guess this?</a></li>
</ul></li>
<li><a href="#section-appearances-are-deceptive">Section: Appearances are deceptive!</a>
<ul>
<li><a href="#-skipping-lines">▶ Skipping lines?</a></li>
<li><a href="#-teleportation-">▶ Teleportation *</a></li>
<li><a href="#-well-something-is-fishy">▶ Well, something is fishy…</a></li>
</ul></li>
<li><a href="#section-watch-out-for-the-landmines">Section: Watch out for the landmines!</a>
<ul>
<li><a href="#-modifying-a-dictionary-while-iterating-over-it">▶ Modifying a dictionary while iterating over it</a></li>
<li><a href="#-stubborn-del-operator-">▶ Stubborn <code>del</code> operator *</a></li>
<li><a href="#-deleting-a-list-item-while-iterating">▶ Deleting a list item while iterating</a></li>
<li><a href="#-loop-variables-leaking-out">▶ Loop variables leaking out!</a></li>
<li><a href="#-beware-of-default-mutable-arguments">▶ Beware of default mutable arguments!</a></li>
<li><a href="#-catching-the-exceptions">▶ Catching the Exceptions</a></li>
<li><a href="#-same-operands-different-story">▶ Same operands, different story!</a></li>
<li><a href="#-the-out-of-scope-variable">▶ The out of scope variable</a></li>
<li><a href="#-be-careful-with-chained-operations">▶ Be careful with chained operations</a></li>
<li><a href="#-name-resolution-ignoring-class-scope">▶ Name resolution ignoring class scope</a></li>
<li><a href="#-needle-in-a-haystack">▶ Needle in a Haystack</a></li>
</ul></li>
<li><a href="#section-the-hidden-treasures">Section: The Hidden treasures!</a>
<ul>
<li><a href="#-okay-python-can-you-make-me-fly-">▶ Okay Python, Can you make me fly? *</a></li>
<li><a href="#-goto-but-why-">▶ <code>goto</code>, but why? *</a></li>
<li><a href="#-brace-yourself-">▶ Brace yourself! *</a></li>
<li><a href="#-lets-meet-friendly-language-uncle-for-life-">▶ Let’s meet Friendly Language Uncle For Life *</a></li>
<li><a href="#-even-python-understands-that-love-is-complicated-">▶ Even Python understands that love is complicated *</a></li>
<li><a href="#-yes-it-exists">▶ Yes, it exists!</a></li>
<li><a href="#-inpinity-">▶ Inpinity *</a></li>
<li><a href="#-mangling-time-">▶ Mangling time! *</a></li>
</ul></li>
<li><a href="#section-miscellaneous">Section: Miscellaneous</a>
<ul>
<li><a href="#--is-faster">▶ <code>+=</code> is faster</a></li>
<li><a href="#-lets-make-a-giant-string">▶ Let’s make a giant string!</a></li>
<li><a href="#-explicit-typecast-of-strings">▶ Explicit typecast of strings</a></li>
<li><a href="#-minor-ones">▶ Minor Ones</a></li>
</ul></li>
</ul></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
<li><a href="#-license">🎓 License</a>
<ul>
<li><a href="#help">Help</a></li>
<li><a href="#want-to-share-wtfpython-with-friends">Want to share wtfpython with friends?</a></li>
<li><a href="#need-a-pdf-version">Need a pdf version?</a></li>
</ul></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="structure-of-the-examples">Structure of the Examples</h1>
<p>All the examples are structured like below:</p>
<blockquote>
<h3 id="some-fancy-title-the-asterisk-at-the-end-of-the-title-indicates-the-example-was-not-present-in-the-first-release-and-has-been-recently-added.">▶ Some fancy Title * The asterisk at the end of the title indicates the example was not present in the first release and has been recently added.</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Setting up the code.</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co"># Preparation for the magic...</span></a></code></pre></div>
<p><strong>Output (Python version):</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> triggering_statement</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">Probably unexpected output</a></code></pre></div>
<p>(Optional): One line describing the unexpected output.</p>
<h4 id="explanation">💡 Explanation:</h4>
<ul>
<li><p>Brief explanation of what’s happening and why is it happening.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" data-line-number="1">Setting up examples <span class="cf">for</span> clarification (<span class="cf">if</span> necessary)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> trigger <span class="co"># some example that makes it easy to unveil the magic</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># some justified output</span></a></code></pre></div></li>
</ul>
</blockquote>
<p><strong>Note:</strong> All the examples are tested on Python 3.5.2 interactive interpreter, and they should work for all the Python versions unless explicitly specified in the description.</p>
<h1 id="usage">Usage</h1>
<p>A nice way to get the most out of these examples, in my opinion, will be just to read the examples chronologically, and for every example: - Carefully read the initial code for setting up the example. If you’re an experienced Python programmer, most of the times you will successfully anticipate what’s going to happen next. - Read the output snippets and, + Check if the outputs are the same as you’d expect. + Make sure if you know the exact reason behind the output being the way it is. - If no, take a deep breath, and read the explanation (and if you still don’t understand, shout out! and create an issue <a href="https://github.com/satwikkansal/wtfPython">here</a>). - If yes, give a gentle pat on your back, and you may skip to the next example.</p>
<p>PS: You can also read WTFpython at the command line. There’s a pypi package and an npm package (supports colored formatting) for the same.</p>
<p>To install the npm package <a href="https://www.npmjs.com/package/wtfpython"><code>wtfpython</code></a></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1">$ <span class="ex">npm</span> install -g wtfpython</a></code></pre></div>
<p>Alternatively, to install the pypi package <a href="https://pypi.python.org/pypi/wtfpython"><code>wtfpython</code></a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" data-line-number="1">$ <span class="ex">pip</span> install wtfpython -U</a></code></pre></div>
<p>Now, just run <code>wtfpython</code> at the command line which will open this collection in your selected <code>$PAGER</code>.</p>
<hr />
<h1 id="examples">👀 Examples</h1>
<h2 id="section-strain-your-brain">Section: Strain your brain!</h2>
<h3 id="strings-can-be-tricky-sometimes">▶ Strings can be tricky sometimes *</h3>
<p>1.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="st">&quot;some_string&quot;</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(a)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="dv">140420665652016</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(<span class="st">&quot;some&quot;</span> <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="st">&quot;string&quot;</span>) <span class="co"># Notice that both the ids are same.</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="dv">140420665652016</span></a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="st">&quot;wtf&quot;</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="st">&quot;wtf&quot;</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="va">True</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="st">&quot;wtf!&quot;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="st">&quot;wtf!&quot;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="va">False</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="op">&gt;&gt;&gt;</span> a, b <span class="op">=</span> <span class="st">&quot;wtf!&quot;</span>, <span class="st">&quot;wtf!&quot;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="va">True</span></a></code></pre></div>
<p>3.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;a&#39;</span> <span class="op">*</span> <span class="dv">20</span> <span class="kw">is</span> <span class="st">&#39;aaaaaaaaaaaaaaaaaaaa&#39;</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;a&#39;</span> <span class="op">*</span> <span class="dv">21</span> <span class="kw">is</span> <span class="st">&#39;aaaaaaaaaaaaaaaaaaaaa&#39;</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="va">False</span></a></code></pre></div>
<p>Makes sense, right?</p>
<h4 id="explanation-1">💡 Explanation:</h4>
<ul>
<li>Such behavior is due to CPython optimization (called string interning) that tries to use existing immutable objects in some cases rather than creating a new object every time.</li>
<li>After being interned, many variables may point to the same string object in memory (thereby saving memory).</li>
<li>In the snippets above, strings are implicitly interned. The decision of when to implicitly intern a string is implementation dependent. There are some facts that can be used to guess if a string will be interned or not:
<ul>
<li>All length 0 and length 1 strings are interned.</li>
<li>Strings are interned at compile time (<code>'wtf'</code> will be interned but <code>''.join(['w', 't', 'f']</code> will not be interned)</li>
<li>Strings that are not composed of ASCII letters, digits or underscores, are not interned. This explains why <code>'wtf!'</code> was not interned due to <code>!</code>. <img src="/images/string-intern/string_intern.png" alt=""></li>
</ul></li>
<li>When <code>a</code> and <code>b</code> are set to <code>&quot;wtf!&quot;</code> in the same line, the Python interpreter creates a new object, then references the second variable at the same time. If you do it on separate lines, it doesn’t “know” that there’s already <code>wtf!</code> as an object (because <code>&quot;wtf!&quot;</code> is not implicitly interned as per the facts mentioned above). It’s a compiler optimization and specifically applies to the interactive environment.</li>
<li>Constant folding is a technique for <a href="https://en.wikipedia.org/wiki/Peephole_optimization">peephole optimization</a> in Python. This means the expression <code>'a'*20</code> is replaced by <code>'aaaaaaaaaaaaaaaaaaaa'</code> during compilation to reduce few clock cycles during runtime. But since the python bytecode generated after compilation is stored in <code>.pyc</code> files, the strings greater than length of 20 are discarded for peephole optimization (Why? Imagine the size of <code>.pyc</code> file generated as a result of the expression <code>'a'*10**10</code>)</li>
</ul>
<hr />
<h3 id="time-for-some-hash-brownies">▶ Time for some hash brownies!</h3>
<p>1.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" data-line-number="1">some_dict <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">some_dict[<span class="fl">5.5</span>] <span class="op">=</span> <span class="st">&quot;Ruby&quot;</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">some_dict[<span class="fl">5.0</span>] <span class="op">=</span> <span class="st">&quot;JavaScript&quot;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">some_dict[<span class="dv">5</span>] <span class="op">=</span> <span class="st">&quot;Python&quot;</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_dict[<span class="fl">5.5</span>]</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">&quot;Ruby&quot;</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> some_dict[<span class="fl">5.0</span>]</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">&quot;Python&quot;</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> some_dict[<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">&quot;Python&quot;</span></a></code></pre></div>
<p>“Python” destroyed the existence of “JavaScript”?</p>
<h4 id="explanation-2">💡 Explanation</h4>
<ul>
<li>Python dictionaries check for equality and compare the hash value to determine if two keys are the same.</li>
<li><p>Immutable objects with same value always have the same hash in Python.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="dv">5</span> <span class="op">==</span> <span class="fl">5.0</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">hash</span>(<span class="dv">5</span>) <span class="op">==</span> <span class="bu">hash</span>(<span class="fl">5.0</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="va">True</span></a></code></pre></div>
<strong>Note:</strong> Objects with different values may also have same hash (known as hash collision).</li>
<li>When the statement <code>some_dict[5] = &quot;Python&quot;</code> is executed, the existing value “JavaScript” is overwritten with “Python” because Python recognizes <code>5</code> and <code>5.0</code> as the same keys of the dictionary <code>some_dict</code>.</li>
<li><p>This StackOverflow <a href="https://stackoverflow.com/a/32211042/4354153">answer</a> explains beautifully the rationale behind it.</p></li>
</ul>
<hr />
<h3 id="return-return-everywhere">▶ Return return everywhere!</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">def</span> some_func():</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">        <span class="cf">return</span> <span class="st">&#39;from_try&#39;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">    <span class="cf">finally</span>:</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">        <span class="cf">return</span> <span class="st">&#39;from_finally&#39;</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_func()</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">&#39;from_finally&#39;</span></a></code></pre></div>
<h4 id="explanation-3">💡 Explanation:</h4>
<ul>
<li>When a <code>return</code>, <code>break</code> or <code>continue</code> statement is executed in the <code>try</code> suite of a “try…finally” statement, the <code>finally</code> clause is also executed ‘on the way out.</li>
<li>The return value of a function is determined by the last <code>return</code> statement executed. Since the <code>finally</code> clause always executes, a <code>return</code> statement executed in the <code>finally</code> clause will always be the last one executed.</li>
</ul>
<hr />
<h3 id="deep-down-were-all-the-same.">▶ Deep down, we’re all the same. *</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">class</span> WTF:</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  <span class="cf">pass</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> WTF() <span class="op">==</span> WTF() <span class="co"># two different instances can&#39;t be equal</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="va">False</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> WTF() <span class="kw">is</span> WTF() <span class="co"># identities are also different</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="va">False</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="bu">hash</span>(WTF()) <span class="op">==</span> <span class="bu">hash</span>(WTF()) <span class="co"># hashes _should_ be different as well</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="va">True</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(WTF()) <span class="op">==</span> <span class="bu">id</span>(WTF())</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="va">True</span></a></code></pre></div>
<h4 id="explanation-4">💡 Explanation:</h4>
<ul>
<li>When <code>id</code> was called, Python created a <code>WTF</code> class object and passed it to the <code>id</code> function. The <code>id</code> function takes its <code>id</code> (its memory location), and throws away the object. The object is destroyed.</li>
<li>When we do this twice in succession, Python allocates the same memory location to this second object as well. Since (in CPython) <code>id</code> uses the memory location as the object id, the id of the two objects is the same.</li>
<li>So, object’s id is unique only for the lifetime of the object. After the object is destroyed, or before it is created, something else can have the same id.</li>
<li><p>But why did the <code>is</code> operator evaluated to <code>False</code>? Let’s see with this snippet.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">class</span> WTF(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>): <span class="bu">print</span>(<span class="st">&quot;I &quot;</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  <span class="kw">def</span> <span class="fu">__del__</span>(<span class="va">self</span>): <span class="bu">print</span>(<span class="st">&quot;D &quot;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> WTF() <span class="kw">is</span> WTF()</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">I I D D</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(WTF()) <span class="op">==</span> <span class="bu">id</span>(WTF())</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">I D I D</a></code></pre></div>
<p>As you may observe, the order in which the objects are destroyed is what made all the difference here.</p></li>
</ul>
<hr />
<h3 id="for-what">▶ For what?</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb19-1" data-line-number="1">some_string <span class="op">=</span> <span class="st">&quot;wtf&quot;</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">some_dict <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="cf">for</span> i, some_dict[i] <span class="kw">in</span> <span class="bu">enumerate</span>(some_string):</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">    <span class="cf">pass</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_dict <span class="co"># An indexed dict is created.</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">{<span class="dv">0</span>: <span class="st">&#39;w&#39;</span>, <span class="dv">1</span>: <span class="st">&#39;t&#39;</span>, <span class="dv">2</span>: <span class="st">&#39;f&#39;</span>}</a></code></pre></div>
<h4 id="explanation-5">💡 Explanation:</h4>
<ul>
<li><p>A <code>for</code> statement is defined in the <a href="https://docs.python.org/3/reference/grammar.html">Python grammar</a> as:</p>
<pre><code>for_stmt: &#39;for&#39; exprlist &#39;in&#39; testlist &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]</code></pre>
<p>Where <code>exprlist</code> is the assignment target. This means that the equivalent of <code>{exprlist} = {next_value}</code> is <strong>executed for each item</strong> in the iterable. An interesting example that illustrates this:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">    i <span class="op">=</span> <span class="dv">10</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<pre><code>0
1
2
3</code></pre>
<p>Did you expect the loop to run just once?</p>
<p><strong>💡 Explanation:</strong></p>
<ul>
<li>The assignment statement <code>i = 10</code> never affects the iterations of the loop because of the way for loops work in Python. Before the beginning of every iteration, the next item provided by the iterator (<code>range(4)</code> this case) is unpacked and assigned the target list variables (<code>i</code> in this case).</li>
</ul></li>
<li><p>The <code>enumerate(some_string)</code> function yields a new value <code>i</code> (A counter going up) and a character from the <code>some_string</code> in each iteration. It then sets the (just assigned) <code>i</code> key of the dictionary <code>some_dict</code> to that character. The unrolling of the loop can be simplified as:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> i, some_dict[i] <span class="op">=</span> (<span class="dv">0</span>, <span class="st">&#39;w&#39;</span>)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> i, some_dict[i] <span class="op">=</span> (<span class="dv">1</span>, <span class="st">&#39;t&#39;</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> i, some_dict[i] <span class="op">=</span> (<span class="dv">2</span>, <span class="st">&#39;f&#39;</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> some_dict</a></code></pre></div></li>
</ul>
<hr />
<h3 id="evaluation-time-discrepancy">▶ Evaluation time discrepancy</h3>
<p>1.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb25-1" data-line-number="1">array <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">15</span>]</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">g <span class="op">=</span> (x <span class="cf">for</span> x <span class="kw">in</span> array <span class="cf">if</span> array.count(x) <span class="op">&gt;</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">array <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">22</span>]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">list</span>(g))</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">[<span class="dv">8</span>]</a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb27-1" data-line-number="1">array_1 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">g1 <span class="op">=</span> (x <span class="cf">for</span> x <span class="kw">in</span> array_1)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">array_1 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">array_2 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">g2 <span class="op">=</span> (x <span class="cf">for</span> x <span class="kw">in</span> array_2)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">array_2[:] <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">list</span>(g1))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">list</span>(g2))</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</a></code></pre></div>
<h4 id="explanation-6">💡 Explanation</h4>
<ul>
<li>In a <a href="https://wiki.python.org/moin/Generators">generator</a> expression, the <code>in</code> clause is evaluated at declaration time, but the conditional clause is evaluated at runtime.</li>
<li>So before runtime, <code>array</code> is re-assigned to the list <code>[2, 8, 22]</code>, and since out of <code>1</code>, <code>8</code> and <code>15</code>, only the count of <code>8</code> is greater than <code>0</code>, the generator only yields <code>8</code>.</li>
<li>The differences in the output of <code>g1</code> and <code>g2</code> in the second part is due the way variables <code>array_1</code> and <code>array_2</code> are re-assigned values.</li>
<li>In the first case, <code>array_1</code> is binded to the new object <code>[1,2,3,4,5]</code> and since the <code>in</code> clause is evaluated at the declaration time it still refers to the old object <code>[1,2,3,4]</code> (which is not destroyed).</li>
<li>In the second case, the slice assignment to <code>array_2</code> updates the same old object <code>[1,2,3,4]</code> to <code>[1,2,3,4,5]</code>. Hence both the <code>g2</code> and <code>array_2</code> still have reference to the same object (which has now been updated to <code>[1,2,3,4,5]</code>).</li>
</ul>
<hr />
<h3 id="is-is-not-what-it-is">▶ <code>is</code> is not what it is!</h3>
<p>The following is a very famous example present all over the internet.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">256</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="dv">256</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="va">True</span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5"></a>
<a class="sourceLine" id="cb29-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb29-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb29-9" data-line-number="9"><span class="va">False</span></a>
<a class="sourceLine" id="cb29-10" data-line-number="10"></a>
<a class="sourceLine" id="cb29-11" data-line-number="11"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">257</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb29-12" data-line-number="12"><span class="op">&gt;&gt;&gt;</span> a <span class="kw">is</span> b</a>
<a class="sourceLine" id="cb29-13" data-line-number="13"><span class="va">True</span></a></code></pre></div>
<h4 id="explanation-7">💡 Explanation:</h4>
<p><strong>The difference between <code>is</code> and <code>==</code></strong></p>
<ul>
<li><code>is</code> operator checks if both the operands refer to the same object (i.e., it checks if the identity of the operands matches or not).</li>
<li><code>==</code> operator compares the values of both the operands and checks if they are the same.</li>
<li><p>So <code>is</code> is for reference equality and <code>==</code> is for value equality. An example to clear things up,</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> [] <span class="op">==</span> []</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> [] <span class="kw">is</span> [] <span class="co"># These are two empty lists at two different memory locations.</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="va">False</span></a></code></pre></div></li>
</ul>
<p><strong><code>256</code> is an existing object but <code>257</code> isn’t</strong></p>
<p>When you start up python the numbers from <code>-5</code> to <code>256</code> will be allocated. These numbers are used a lot, so it makes sense just to have them ready.</p>
<p>Quoting from https://docs.python.org/3/c-api/long.html &gt; The current implementation keeps an array of integer objects for all integers between -5 and 256, when you create an int in that range you just get back a reference to the existing object. So it should be possible to change the value of 1. I suspect the behavior of Python, in this case, is undefined. :-)</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(<span class="dv">256</span>)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="dv">10922528</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">256</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="dv">256</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(a)</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"><span class="dv">10922528</span></a>
<a class="sourceLine" id="cb31-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(b)</a>
<a class="sourceLine" id="cb31-8" data-line-number="8"><span class="dv">10922528</span></a>
<a class="sourceLine" id="cb31-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(<span class="dv">257</span>)</a>
<a class="sourceLine" id="cb31-10" data-line-number="10"><span class="dv">140084850247312</span></a>
<a class="sourceLine" id="cb31-11" data-line-number="11"><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb31-12" data-line-number="12"><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb31-13" data-line-number="13"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"><span class="dv">140084850247440</span></a>
<a class="sourceLine" id="cb31-15" data-line-number="15"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(y)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16"><span class="dv">140084850247344</span></a></code></pre></div>
<p>Here the interpreter isn’t smart enough while executing <code>y = 257</code> to recognize that we’ve already created an integer of the value <code>257,</code> and so it goes on to create another object in the memory.</p>
<p><strong>Both <code>a</code> and <code>b</code> refer to the same object when initialized with same value in the same line.</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a, b <span class="op">=</span> <span class="dv">257</span>, <span class="dv">257</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(a)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="dv">140640774013296</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(b)</a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="dv">140640774013296</span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> <span class="dv">257</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(a)</a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="dv">140640774013392</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(b)</a>
<a class="sourceLine" id="cb32-11" data-line-number="11"><span class="dv">140640774013488</span></a></code></pre></div>
<ul>
<li>When a and b are set to <code>257</code> in the same line, the Python interpreter creates a new object, then references the second variable at the same time. If you do it on separate lines, it doesn’t “know” that there’s already <code>257</code> as an object.</li>
<li>It’s a compiler optimization and specifically applies to the interactive environment. When you enter two lines in a live interpreter, they’re compiled separately, therefore optimized separately. If you were to try this example in a <code>.py</code> file, you would not see the same behavior, because the file is compiled all at once.</li>
</ul>
<hr />
<h3 id="a-tic-tac-toe-where-x-wins-in-the-first-attempt">▶ A tic-tac-toe where X wins in the first attempt!</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Let&#39;s initialize a row</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">row <span class="op">=</span> [<span class="st">&quot;&quot;</span>]<span class="op">*</span><span class="dv">3</span> <span class="co">#row i[&#39;&#39;, &#39;&#39;, &#39;&#39;]</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="co"># Let&#39;s make a board</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4">board <span class="op">=</span> [row]<span class="op">*</span><span class="dv">3</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> board</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">[[<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>]]</a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> board[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">[<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>]</a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> board[<span class="dv">0</span>][<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb34-6" data-line-number="6"><span class="co">&#39;&#39;</span></a>
<a class="sourceLine" id="cb34-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> board[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="st">&quot;X&quot;</span></a>
<a class="sourceLine" id="cb34-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> board</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">[[<span class="st">&#39;X&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;X&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;X&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>]]</a></code></pre></div>
<p>We didn’t assign 3 “X”s or did we?</p>
<h4 id="explanation-8">💡 Explanation:</h4>
<p>When we initialize <code>row</code> variable, this visualization explains what happens in the memory</p>
<figure>
<img src="/images/tic-tac-toe/after_row_initialized.png" alt="image" /><figcaption>image</figcaption>
</figure>
<p>And when the <code>board</code> is initialized by multiplying the <code>row</code>, this is what happens inside the memory (each of the elements <code>board[0]</code>, <code>board[1]</code> and <code>board[2]</code> is a reference to the same list referred by <code>row</code>)</p>
<figure>
<img src="/images/tic-tac-toe/after_board_initialized.png" alt="image" /><figcaption>image</figcaption>
</figure>
<p>We can avoid this scenario here by not using <code>row</code> variable to generate <code>board</code>. (Asked in <a href="https://github.com/satwikkansal/wtfpython/issues/68">this</a> issue).</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> board <span class="op">=</span> [([<span class="st">&#39;&#39;</span>]<span class="op">*</span><span class="dv">3</span>)<span class="op">*</span><span class="dv">3</span>] <span class="co"># board = = [[&#39;&#39;]*3 for _ in range(3)]</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> board[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="st">&quot;X&quot;</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> board</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">[[<span class="st">&#39;X&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>], [<span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;&#39;</span>]]</a></code></pre></div>
<hr />
<h3 id="the-sticky-output-function">▶ The sticky output function</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb36-1" data-line-number="1">funcs <span class="op">=</span> []</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">results <span class="op">=</span> []</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">    <span class="kw">def</span> some_func():</a>
<a class="sourceLine" id="cb36-5" data-line-number="5">        <span class="cf">return</span> x</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">    funcs.append(some_func)</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">    results.append(some_func())</a>
<a class="sourceLine" id="cb36-8" data-line-number="8"></a>
<a class="sourceLine" id="cb36-9" data-line-number="9">funcs_results <span class="op">=</span> [func() <span class="cf">for</span> func <span class="kw">in</span> funcs]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> results</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> funcs_results</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">[<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>]</a></code></pre></div>
<p>Even when the values of <code>x</code> were different in every iteration prior to appending <code>some_func</code> to <code>funcs</code>, all the functions return 6.</p>
<p>//OR</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> powers_of_x <span class="op">=</span> [<span class="kw">lambda</span> x: x<span class="op">**</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>)]</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> [f(<span class="dv">2</span>) <span class="cf">for</span> f <span class="kw">in</span> powers_of_x]</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">[<span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>, <span class="dv">512</span>]</a></code></pre></div>
<h4 id="explanation-9">💡 Explanation</h4>
<ul>
<li><p>When defining a function inside a loop that uses the loop variable in its body, the loop function’s closure is bound to the variable, not its value. So all of the functions use the latest value assigned to the variable for computation.</p></li>
<li><p>To get the desired behavior you can pass in the loop variable as a named variable to the function. <strong>Why this works?</strong> Because this will define the variable again within the function’s scope.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb39-1" data-line-number="1">funcs <span class="op">=</span> []</a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</a>
<a class="sourceLine" id="cb39-3" data-line-number="3">    <span class="kw">def</span> some_func(x<span class="op">=</span>x):</a>
<a class="sourceLine" id="cb39-4" data-line-number="4">        <span class="cf">return</span> x</a>
<a class="sourceLine" id="cb39-5" data-line-number="5">    funcs.append(some_func)</a></code></pre></div>
<p><strong>Output:</strong> <code>py   &gt;&gt;&gt; funcs_results = [func() for func in funcs]   &gt;&gt;&gt; funcs_results   [0, 1, 2, 3, 4, 5, 6]</code></p></li>
</ul>
<hr />
<h3 id="is-not-...-is-not-is-not-...">▶ <code>is not ...</code> is not <code>is (not ...)</code></h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;something&#39;</span> <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;something&#39;</span> <span class="kw">is</span> (<span class="kw">not</span> <span class="va">None</span>)</a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="va">False</span></a></code></pre></div>
<h4 id="explanation-10">💡 Explanation</h4>
<ul>
<li><code>is not</code> is a single binary operator, and has behavior different than using <code>is</code> and <code>not</code> separated.</li>
<li><code>is not</code> evaluates to <code>False</code> if the variables on either side of the operator point to the same object and <code>True</code> otherwise.</li>
</ul>
<hr />
<h3 id="the-surprising-comma">▶ The surprising comma</h3>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> f(x, y,):</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">...     <span class="bu">print</span>(x, y)</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">...</a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> g(x<span class="op">=</span><span class="dv">4</span>, y<span class="op">=</span><span class="dv">5</span>,):</a>
<a class="sourceLine" id="cb41-5" data-line-number="5">...     <span class="bu">print</span>(x, y)</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">...</a>
<a class="sourceLine" id="cb41-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> h(x, <span class="op">**</span>kwargs,):</a>
<a class="sourceLine" id="cb41-8" data-line-number="8">  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9">    <span class="kw">def</span> h(x, <span class="op">**</span>kwargs,):</a>
<a class="sourceLine" id="cb41-10" data-line-number="10">                     <span class="op">^</span></a>
<a class="sourceLine" id="cb41-11" data-line-number="11"><span class="pp">SyntaxError</span>: invalid syntax</a>
<a class="sourceLine" id="cb41-12" data-line-number="12"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> h(<span class="op">*</span>args,):</a>
<a class="sourceLine" id="cb41-13" data-line-number="13">  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb41-14" data-line-number="14">    <span class="kw">def</span> h(<span class="op">*</span>args,):</a>
<a class="sourceLine" id="cb41-15" data-line-number="15">                <span class="op">^</span></a>
<a class="sourceLine" id="cb41-16" data-line-number="16"><span class="pp">SyntaxError</span>: invalid syntax</a></code></pre></div>
<h4 id="explanation-11">💡 Explanation:</h4>
<ul>
<li>Trailing comma is not always legal in formal parameters list of a Python function.</li>
<li>In Python, the argument list is defined partially with leading commas and partially with trailing commas. This conflict causes situations where a comma is trapped in the middle, and no rule accepts it.</li>
<li><strong>Note:</strong> The trailing comma problem is <a href="https://bugs.python.org/issue9232">fixed in Python 3.6</a>. The remarks in <a href="https://bugs.python.org/issue9232#msg248399">this</a> post discuss in brief different usages of trailing commas in Python.</li>
</ul>
<hr />
<h3 id="backslashes-at-the-end-of-string">▶ Backslashes at the end of string</h3>
<p><strong>Output:</strong></p>
<pre><code>&gt;&gt;&gt; print(&quot;\\ C:\\&quot;)
\ C:\
&gt;&gt;&gt; print(r&quot;\ C:&quot;)
\ C:
&gt;&gt;&gt; print(r&quot;\ C:\&quot;)

    File &quot;&lt;stdin&gt;&quot;, line 1
      print(r&quot;\ C:\&quot;)
                     ^
SyntaxError: EOL while scanning string literal</code></pre>
<h4 id="explanation-12">💡 Explanation</h4>
<ul>
<li><p>In a raw string literal, as indicated by the prefix <code>r</code>, the backslash doesn’t have the special meaning.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="bu">repr</span>(<span class="vs">r&quot;wt\&quot;f&quot;</span>))</a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="co">&#39;wt\\&quot;f&#39;</span></a></code></pre></div></li>
<li><p>What the interpreter actually does, though, is simply change the behavior of backslashes, so they pass themselves and the following character through. That’s why backslashes don’t work at the end of a raw string.</p></li>
</ul>
<hr />
<h3 id="not-knot">▶ not knot!</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb44-1" data-line-number="1">x <span class="op">=</span> <span class="va">True</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">y <span class="op">=</span> <span class="va">False</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="kw">not</span> x <span class="op">==</span> y</a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> x <span class="op">==</span> <span class="kw">not</span> y</a>
<a class="sourceLine" id="cb45-4" data-line-number="4">  File <span class="st">&quot;&lt;input&gt;&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb45-5" data-line-number="5">    x <span class="op">==</span> <span class="kw">not</span> y</a>
<a class="sourceLine" id="cb45-6" data-line-number="6">           <span class="op">^</span></a>
<a class="sourceLine" id="cb45-7" data-line-number="7"><span class="pp">SyntaxError</span>: invalid syntax</a></code></pre></div>
<h4 id="explanation-13">💡 Explanation:</h4>
<ul>
<li>Operator precedence affects how an expression is evaluated, and <code>==</code> operator has higher precedence than <code>not</code> operator in Python.</li>
<li>So <code>not x == y</code> is equivalent to <code>not (x == y)</code> which is equivalent to <code>not (True == False)</code> finally evaluating to <code>True</code>.</li>
<li>But <code>x == not y</code> raises a <code>SyntaxError</code> because it can be thought of being equivalent to <code>(x == not) y</code> and not <code>x == (not y)</code> which you might have expected at first sight.</li>
<li>The parser expected the <code>not</code> token to be a part of the <code>not in</code> operator (because both <code>==</code> and <code>not in</code> operators have the same precedence), but after not being able to find an <code>in</code> token following the <code>not</code> token, it raises a <code>SyntaxError</code>.</li>
</ul>
<hr />
<h3 id="half-triple-quoted-strings">▶ Half triple-quoted strings</h3>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&#39;wtfpython&#39;&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb46-2" data-line-number="2">wtfpython</a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">&quot;wtfpython&quot;&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb46-4" data-line-number="4">wtfpython</a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="co"># The following statements raise `SyntaxError`</span></a>
<a class="sourceLine" id="cb46-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> <span class="co"># print(&#39;&#39;&#39;wtfpython&#39;)</span></a>
<a class="sourceLine" id="cb46-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="co"># print(&quot;&quot;&quot;wtfpython&quot;)</span></a></code></pre></div>
<h4 id="explanation-14">💡 Explanation:</h4>
<ul>
<li><p>Python supports implicit <a href="https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation">string literal concatenation</a>, Example,</p>
<pre><code>&gt;&gt;&gt; print(&quot;wtf&quot; &quot;python&quot;)
wtfpython
&gt;&gt;&gt; print(&quot;wtf&quot; &quot;&quot;) # or &quot;wtf&quot;&quot;&quot;
wtf</code></pre></li>
<li><p><code>'''</code> and <code>&quot;&quot;&quot;</code> are also string delimiters in Python which causes a SyntaxError because the Python interpreter was expecting a terminating triple quote as delimiter while scanning the currently encountered triple quoted string literal.</p></li>
</ul>
<hr />
<h3 id="midnight-time-doesnt-exist">▶ Midnight time doesn’t exist?</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="im">from</span> datetime <span class="im">import</span> datetime</a>
<a class="sourceLine" id="cb48-2" data-line-number="2"></a>
<a class="sourceLine" id="cb48-3" data-line-number="3">midnight <span class="op">=</span> datetime(<span class="dv">2018</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb48-4" data-line-number="4">midnight_time <span class="op">=</span> midnight.time()</a>
<a class="sourceLine" id="cb48-5" data-line-number="5"></a>
<a class="sourceLine" id="cb48-6" data-line-number="6">noon <span class="op">=</span> datetime(<span class="dv">2018</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">12</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb48-7" data-line-number="7">noon_time <span class="op">=</span> noon.time()</a>
<a class="sourceLine" id="cb48-8" data-line-number="8"></a>
<a class="sourceLine" id="cb48-9" data-line-number="9"><span class="cf">if</span> midnight_time:</a>
<a class="sourceLine" id="cb48-10" data-line-number="10">    <span class="bu">print</span>(<span class="st">&quot;Time at midnight is&quot;</span>, midnight_time)</a>
<a class="sourceLine" id="cb48-11" data-line-number="11"></a>
<a class="sourceLine" id="cb48-12" data-line-number="12"><span class="cf">if</span> noon_time:</a>
<a class="sourceLine" id="cb48-13" data-line-number="13">    <span class="bu">print</span>(<span class="st">&quot;Time at noon is&quot;</span>, noon_time)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">(</span><span class="st">&#39;Time at noon is&#39;</span>, <span class="ex">datetime.time</span>(12, 0<span class="kw">)</span>)</a></code></pre></div>
<p>The midnight time is not printed.</p>
<h4 id="explanation-15">💡 Explanation:</h4>
<p>Before Python 3.5, the boolean value for <code>datetime.time</code> object was considered to be <code>False</code> if it represented midnight in UTC. It is error-prone when using the <code>if obj:</code> syntax to check if the <code>obj</code> is null or some equivalent of “empty.”</p>
<hr />
<h3 id="whats-wrong-with-booleans">▶ What’s wrong with booleans?</h3>
<p>1.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># A simple example to count the number of boolean and</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="co"># integers in an iterable of mixed data types.</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3">mixed_list <span class="op">=</span> [<span class="va">False</span>, <span class="fl">1.0</span>, <span class="st">&quot;some_string&quot;</span>, <span class="dv">3</span>, <span class="va">True</span>, [], <span class="va">False</span>]</a>
<a class="sourceLine" id="cb50-4" data-line-number="4">integers_found_so_far <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb50-5" data-line-number="5">booleans_found_so_far <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb50-6" data-line-number="6"></a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="cf">for</span> item <span class="kw">in</span> mixed_list:</a>
<a class="sourceLine" id="cb50-8" data-line-number="8">    <span class="cf">if</span> <span class="bu">isinstance</span>(item, <span class="bu">int</span>):</a>
<a class="sourceLine" id="cb50-9" data-line-number="9">        integers_found_so_far <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb50-10" data-line-number="10">    <span class="cf">elif</span> <span class="bu">isinstance</span>(item, <span class="bu">bool</span>):</a>
<a class="sourceLine" id="cb50-11" data-line-number="11">        booleans_found_so_far <span class="op">+=</span> <span class="dv">1</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> booleans_found_so_far</a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="dv">0</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> integers_found_so_far</a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="dv">4</span></a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb52-1" data-line-number="1">another_dict <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">another_dict[<span class="va">True</span>] <span class="op">=</span> <span class="st">&quot;JavaScript&quot;</span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3">another_dict[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&quot;Ruby&quot;</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4">another_dict[<span class="fl">1.0</span>] <span class="op">=</span> <span class="st">&quot;Python&quot;</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> another_dict[<span class="va">True</span>]</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="co">&quot;Python&quot;</span></a></code></pre></div>
<p>3.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_bool <span class="op">=</span> <span class="va">True</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;wtf&quot;</span><span class="op">*</span>some_bool</a>
<a class="sourceLine" id="cb54-3" data-line-number="3"><span class="co">&#39;wtf&#39;</span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> some_bool <span class="op">=</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb54-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;wtf&quot;</span><span class="op">*</span>some_bool</a>
<a class="sourceLine" id="cb54-6" data-line-number="6"><span class="co">&#39;&#39;</span></a></code></pre></div>
<h4 id="explanation-16">💡 Explanation:</h4>
<ul>
<li><p>Booleans are a subclass of <code>int</code></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(<span class="va">True</span>, <span class="bu">int</span>)</a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb55-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">isinstance</span>(<span class="va">False</span>, <span class="bu">int</span>)</a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="va">True</span></a></code></pre></div></li>
<li><p>The integer value of <code>True</code> is <code>1</code> and that of <code>False</code> is <code>0</code>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="va">True</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">==</span> <span class="fl">1.0</span> <span class="kw">and</span> <span class="va">False</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">==</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="va">True</span></a></code></pre></div></li>
<li><p>See this StackOverflow <a href="https://stackoverflow.com/a/8169049/4354153">answer</a> for the rationale behind it.</p></li>
</ul>
<hr />
<h3 id="class-attributes-and-instance-attributes">▶ Class attributes and instance attributes</h3>
<p>1.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">class</span> A:</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">    x <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3"></a>
<a class="sourceLine" id="cb57-4" data-line-number="4"><span class="kw">class</span> B(A):</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb57-6" data-line-number="6"></a>
<a class="sourceLine" id="cb57-7" data-line-number="7"><span class="kw">class</span> C(A):</a>
<a class="sourceLine" id="cb57-8" data-line-number="8">    <span class="cf">pass</span></a></code></pre></div>
<p><strong>Ouptut:</strong></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> A.x, B.x, C.x</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> B.x <span class="op">=</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> A.x, B.x, C.x</a>
<a class="sourceLine" id="cb58-5" data-line-number="5">(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb58-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> A.x <span class="op">=</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb58-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> A.x, B.x, C.x</a>
<a class="sourceLine" id="cb58-8" data-line-number="8">(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb58-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> A()</a>
<a class="sourceLine" id="cb58-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> a.x, A.x</a>
<a class="sourceLine" id="cb58-11" data-line-number="11">(<span class="dv">3</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb58-12" data-line-number="12"><span class="op">&gt;&gt;&gt;</span> a.x <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb58-13" data-line-number="13"><span class="op">&gt;&gt;&gt;</span> a.x, A.x</a>
<a class="sourceLine" id="cb58-14" data-line-number="14">(<span class="dv">4</span>, <span class="dv">3</span>)</a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw">class</span> SomeClass:</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">    some_var <span class="op">=</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb59-3" data-line-number="3">    some_list <span class="op">=</span> [<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">    another_list <span class="op">=</span> [<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb59-5" data-line-number="5">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, x):</a>
<a class="sourceLine" id="cb59-6" data-line-number="6">        <span class="va">self</span>.some_var <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb59-7" data-line-number="7">        <span class="va">self</span>.some_list <span class="op">=</span> <span class="va">self</span>.some_list <span class="op">+</span> [x]</a>
<a class="sourceLine" id="cb59-8" data-line-number="8">        <span class="va">self</span>.another_list <span class="op">+=</span> [x]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_obj <span class="op">=</span> SomeClass(<span class="dv">420</span>)</a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> some_obj.some_list</a>
<a class="sourceLine" id="cb60-3" data-line-number="3">[<span class="dv">5</span>, <span class="dv">420</span>]</a>
<a class="sourceLine" id="cb60-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> some_obj.another_list</a>
<a class="sourceLine" id="cb60-5" data-line-number="5">[<span class="dv">5</span>, <span class="dv">420</span>]</a>
<a class="sourceLine" id="cb60-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> another_obj <span class="op">=</span> SomeClass(<span class="dv">111</span>)</a>
<a class="sourceLine" id="cb60-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> another_obj.some_list</a>
<a class="sourceLine" id="cb60-8" data-line-number="8">[<span class="dv">5</span>, <span class="dv">111</span>]</a>
<a class="sourceLine" id="cb60-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> another_obj.another_list</a>
<a class="sourceLine" id="cb60-10" data-line-number="10">[<span class="dv">5</span>, <span class="dv">420</span>, <span class="dv">111</span>]</a>
<a class="sourceLine" id="cb60-11" data-line-number="11"><span class="op">&gt;&gt;&gt;</span> another_obj.another_list <span class="kw">is</span> SomeClass.another_list</a>
<a class="sourceLine" id="cb60-12" data-line-number="12"><span class="va">True</span></a>
<a class="sourceLine" id="cb60-13" data-line-number="13"><span class="op">&gt;&gt;&gt;</span> another_obj.another_list <span class="kw">is</span> some_obj.another_list</a>
<a class="sourceLine" id="cb60-14" data-line-number="14"><span class="va">True</span></a></code></pre></div>
<h4 id="explanation-17">💡 Explanation:</h4>
<ul>
<li>Class variables and variables in class instances are internally handled as dictionaries of a class object. If a variable name is not found in the dictionary of the current class, the parent classes are searched for it.</li>
<li>The <code>+=</code> operator modifies the mutable object in-place without creating a new object. So changing the attribute of one instance affects the other instances and the class attribute as well.</li>
</ul>
<hr />
<h3 id="yielding-none">▶ yielding None</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb61-1" data-line-number="1">some_iterable <span class="op">=</span> (<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2"></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="kw">def</span> some_func(val):</a>
<a class="sourceLine" id="cb61-4" data-line-number="4">    <span class="cf">return</span> <span class="st">&quot;something&quot;</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> [x <span class="cf">for</span> x <span class="kw">in</span> some_iterable]</a>
<a class="sourceLine" id="cb62-2" data-line-number="2">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>]</a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> [(<span class="cf">yield</span> x) <span class="cf">for</span> x <span class="kw">in</span> some_iterable]</a>
<a class="sourceLine" id="cb62-4" data-line-number="4"><span class="op">&lt;</span>generator <span class="bu">object</span> <span class="op">&lt;</span>listcomp<span class="op">&gt;</span> at <span class="bn">0x7f70b0a4ad58</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>([(<span class="cf">yield</span> x) <span class="cf">for</span> x <span class="kw">in</span> some_iterable])</a>
<a class="sourceLine" id="cb62-6" data-line-number="6">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>]</a>
<a class="sourceLine" id="cb62-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>((<span class="cf">yield</span> x) <span class="cf">for</span> x <span class="kw">in</span> some_iterable)</a>
<a class="sourceLine" id="cb62-8" data-line-number="8">[<span class="st">&#39;a&#39;</span>, <span class="va">None</span>, <span class="st">&#39;b&#39;</span>, <span class="va">None</span>]</a>
<a class="sourceLine" id="cb62-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(some_func((<span class="cf">yield</span> x)) <span class="cf">for</span> x <span class="kw">in</span> some_iterable)</a>
<a class="sourceLine" id="cb62-10" data-line-number="10">[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;something&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;something&#39;</span>]</a></code></pre></div>
<h4 id="explanation-18">💡 Explanation:</h4>
<ul>
<li>Source and explanation can be found here: https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions</li>
<li>Related bug report: http://bugs.python.org/issue10544</li>
</ul>
<hr />
<h3 id="mutating-the-immutable">▶ Mutating the immutable!</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb63-1" data-line-number="1">some_tuple <span class="op">=</span> (<span class="st">&quot;A&quot;</span>, <span class="st">&quot;tuple&quot;</span>, <span class="st">&quot;with&quot;</span>, <span class="st">&quot;values&quot;</span>)</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">another_tuple <span class="op">=</span> ([<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>])</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_tuple[<span class="dv">2</span>] <span class="op">=</span> <span class="st">&quot;change this&quot;</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="pp">TypeError</span>: <span class="st">&#39;tuple&#39;</span> <span class="bu">object</span> does <span class="kw">not</span> support item assignment</a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> another_tuple[<span class="dv">2</span>].append(<span class="dv">1000</span>) <span class="co">#This throws no error</span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> another_tuple</a>
<a class="sourceLine" id="cb64-5" data-line-number="5">([<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">1000</span>])</a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> another_tuple[<span class="dv">2</span>] <span class="op">+=</span> [<span class="dv">99</span>, <span class="dv">999</span>]</a>
<a class="sourceLine" id="cb64-7" data-line-number="7"><span class="pp">TypeError</span>: <span class="st">&#39;tuple&#39;</span> <span class="bu">object</span> does <span class="kw">not</span> support item assignment</a>
<a class="sourceLine" id="cb64-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> another_tuple</a>
<a class="sourceLine" id="cb64-9" data-line-number="9">([<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">1000</span>, <span class="dv">99</span>, <span class="dv">999</span>])</a></code></pre></div>
<p>But I thought tuples were immutable…</p>
<h4 id="explanation-19">💡 Explanation:</h4>
<ul>
<li><p>Quoting from https://docs.python.org/2/reference/datamodel.html</p>
<blockquote>
<p>Immutable sequences An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be modified; however, the collection of objects directly referenced by an immutable object cannot change.)</p>
</blockquote></li>
<li><p><code>+=</code> operator changes the list in-place. The item assignment doesn’t work, but when the exception occurs, the item has already been changed in place.</p></li>
</ul>
<hr />
<h3 id="the-disappearing-variable-from-outer-scope">▶ The disappearing variable from outer scope</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb65-1" data-line-number="1">e <span class="op">=</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">    <span class="cf">raise</span> <span class="pp">Exception</span>()</a>
<a class="sourceLine" id="cb65-4" data-line-number="4"><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</a>
<a class="sourceLine" id="cb65-5" data-line-number="5">    <span class="cf">pass</span></a></code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(e)</a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="co"># prints nothing</span></a></code></pre></div>
<p><strong>Output (Python 3.x):</strong></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(e)</a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="pp">NameError</span>: name <span class="st">&#39;e&#39;</span> <span class="kw">is</span> <span class="kw">not</span> defined</a></code></pre></div>
<h4 id="explanation-20">💡 Explanation:</h4>
<ul>
<li><p>Source: https://docs.python.org/3/reference/compound_stmts.html#except</p>
<p>When an exception has been assigned using <code>as</code> target, it is cleared at the end of the except clause. This is as if</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="cf">except</span> E <span class="im">as</span> N:</a>
<a class="sourceLine" id="cb68-2" data-line-number="2">    foo</a></code></pre></div>
<p>was translated into</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="cf">except</span> E <span class="im">as</span> N:</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb69-3" data-line-number="3">        foo</a>
<a class="sourceLine" id="cb69-4" data-line-number="4">    <span class="cf">finally</span>:</a>
<a class="sourceLine" id="cb69-5" data-line-number="5">        <span class="kw">del</span> N</a></code></pre></div>
<p>This means the exception must be assigned to a different name to be able to refer to it after the except clause. Exceptions are cleared because, with the traceback attached to them, they form a reference cycle with the stack frame, keeping all locals in that frame alive until the next garbage collection occurs.</p></li>
<li><p>The clauses are not scoped in Python. Everything in the example is present in the same scope, and the variable <code>e</code> got removed due to the execution of the <code>except</code> clause. The same is not the case with functions which have their separate inner-scopes. The example below illustrates this:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">def</span> f(x):</a>
<a class="sourceLine" id="cb70-2" data-line-number="2">    <span class="kw">del</span>(x)</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">    <span class="bu">print</span>(x)</a>
<a class="sourceLine" id="cb70-4" data-line-number="4"></a>
<a class="sourceLine" id="cb70-5" data-line-number="5">x <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb70-6" data-line-number="6">y <span class="op">=</span> [<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>]</a></code></pre></div>
<p><strong>Output:</strong> <code>py    &gt;&gt;&gt;f(x)    UnboundLocalError: local variable 'x' referenced before assignment    &gt;&gt;&gt;f(y)    UnboundLocalError: local variable 'x' referenced before assignment    &gt;&gt;&gt; x    5    &gt;&gt;&gt; y    [5, 4, 3]</code></p></li>
<li><p>In Python 2.x the variable name <code>e</code> gets assigned to <code>Exception()</code> instance, so when you try to print, it prints nothing.</p>
<p><strong>Output (Python 2.x):</strong> <code>py   &gt;&gt;&gt; e   Exception()   &gt;&gt;&gt; print e   # Nothing is printed!</code></p></li>
</ul>
<hr />
<h3 id="when-true-is-actually-false">▶ When True is actually False</h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="va">True</span> <span class="op">=</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="cf">if</span> <span class="va">True</span> <span class="op">==</span> <span class="va">False</span>:</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">    <span class="bu">print</span>(<span class="st">&quot;I&#39;ve lost faith in truth!&quot;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<pre><code>I&#39;ve lost faith in truth!</code></pre>
<h4 id="explanation-21">💡 Explanation:</h4>
<ul>
<li>Initially, Python used to have no <code>bool</code> type (people used 0 for false and non-zero value like 1 for true). Then they added <code>True</code>, <code>False</code>, and a <code>bool</code> type, but, for backward compatibility, they couldn’t make <code>True</code> and <code>False</code> constants- they just were built-in variables.</li>
<li>Python 3 was backward-incompatible, so it was now finally possible to fix that, and so this example won’t work with Python 3.x!</li>
</ul>
<hr />
<h3 id="from-filled-to-none-in-one-instruction">▶ From filled to None in one instruction…</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb73-1" data-line-number="1">some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb73-2" data-line-number="2">some_dict <span class="op">=</span> {</a>
<a class="sourceLine" id="cb73-3" data-line-number="3">  <span class="st">&quot;key_1&quot;</span>: <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb73-4" data-line-number="4">  <span class="st">&quot;key_2&quot;</span>: <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb73-5" data-line-number="5">  <span class="st">&quot;key_3&quot;</span>: <span class="dv">3</span></a>
<a class="sourceLine" id="cb73-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb73-7" data-line-number="7"></a>
<a class="sourceLine" id="cb73-8" data-line-number="8">some_list <span class="op">=</span> some_list.append(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb73-9" data-line-number="9">some_dict <span class="op">=</span> some_dict.update({<span class="st">&quot;key_4&quot;</span>: <span class="dv">4</span>})</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(some_list)</a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="va">None</span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(some_dict)</a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="va">None</span></a></code></pre></div>
<h4 id="explanation-22">💡 Explanation</h4>
<p>Most methods that modify the items of sequence/mapping objects like <code>list.append</code>, <code>dict.update</code>, <code>list.sort</code>, etc. modify the objects in-place and return <code>None</code>. The rationale behind this is to improve performance by avoiding making a copy of the object if the operation can be done in-place (Referred from <a href="http://docs.python.org/2/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list">here</a>)</p>
<hr />
<h3 id="subclass-relationships">▶ Subclass relationships *</h3>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> collections <span class="im">import</span> Hashable</a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="bu">issubclass</span>(<span class="bu">list</span>, <span class="bu">object</span>)</a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="va">True</span></a>
<a class="sourceLine" id="cb75-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">issubclass</span>(<span class="bu">object</span>, Hashable)</a>
<a class="sourceLine" id="cb75-5" data-line-number="5"><span class="va">True</span></a>
<a class="sourceLine" id="cb75-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> <span class="bu">issubclass</span>(<span class="bu">list</span>, Hashable)</a>
<a class="sourceLine" id="cb75-7" data-line-number="7"><span class="va">False</span></a></code></pre></div>
<p>The Subclass relationships were expected to be transitive, right? (i.e., if <code>A</code> is a subclass of <code>B</code>, and <code>B</code> is a subclass of <code>C</code>, the <code>A</code> <em>should</em> a subclass of <code>C</code>)</p>
<h4 id="explanation-23">💡 Explanation:</h4>
<ul>
<li>Subclass relationships are not necessarily transitive in Python. Anyone is allowed to define their own, arbitrary <code>__subclasscheck__</code> in a metaclass.</li>
<li>When <code>issubclass(cls, Hashable)</code> is called, it simply looks for non-Falsey “<code>__hash__</code>” method in <code>cls</code> or anything it inherits from.</li>
<li>Since <code>object</code> is hashable, but <code>list</code> is non-hashable, it breaks the transitivity relation.</li>
<li>More detailed explanation can be found <a href="https://www.naftaliharris.com/blog/python-subclass-intransitivity/">here</a>.</li>
</ul>
<hr />
<h3 id="the-mysterious-key-type-conversion">▶ The mysterious key type conversion *</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">class</span> SomeClass(<span class="bu">str</span>):</a>
<a class="sourceLine" id="cb76-2" data-line-number="2">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb76-3" data-line-number="3"></a>
<a class="sourceLine" id="cb76-4" data-line-number="4">some_dict <span class="op">=</span> {<span class="st">&#39;s&#39;</span>:<span class="dv">42</span>}</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="bu">list</span>(some_dict.keys())[<span class="dv">0</span>])</a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="bu">str</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> s <span class="op">=</span> SomeClass(<span class="st">&#39;s&#39;</span>)</a>
<a class="sourceLine" id="cb77-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> some_dict[s] <span class="op">=</span> <span class="dv">40</span></a>
<a class="sourceLine" id="cb77-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> some_dict <span class="co"># expected: Two different keys-value pairs</span></a>
<a class="sourceLine" id="cb77-6" data-line-number="6">{<span class="st">&#39;s&#39;</span>: <span class="dv">40</span>}</a>
<a class="sourceLine" id="cb77-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="bu">list</span>(some_dict.keys())[<span class="dv">0</span>])</a>
<a class="sourceLine" id="cb77-8" data-line-number="8"><span class="bu">str</span></a></code></pre></div>
<h4 id="explanation-24">💡 Explanation:</h4>
<ul>
<li>Both the object <code>s</code> and the string <code>&quot;s&quot;</code> hash to the same value because <code>SomeClass</code> inherits the <code>__hash__</code> method of <code>str</code> class.</li>
<li><code>SomeClass(&quot;s&quot;) == &quot;s&quot;</code> evaluates to <code>True</code> because <code>SomeClass</code> also inherits <code>__eq__</code> method from <code>str</code> class.</li>
<li>Since both the objects hash to the same value and are equal, they are represented by the same key in the dictionary.</li>
<li><p>For the desired behavior, we can redefine the <code>__eq__</code> method in <code>SomeClass</code></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">class</span> SomeClass(<span class="bu">str</span>):</a>
<a class="sourceLine" id="cb78-2" data-line-number="2">  <span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, other):</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">      <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb78-4" data-line-number="4">          <span class="bu">type</span>(<span class="va">self</span>) <span class="kw">is</span> SomeClass</a>
<a class="sourceLine" id="cb78-5" data-line-number="5">          <span class="kw">and</span> <span class="bu">type</span>(other) <span class="kw">is</span> SomeClass</a>
<a class="sourceLine" id="cb78-6" data-line-number="6">          <span class="kw">and</span> <span class="bu">super</span>().<span class="fu">__eq__</span>(other)</a>
<a class="sourceLine" id="cb78-7" data-line-number="7">      )</a>
<a class="sourceLine" id="cb78-8" data-line-number="8"></a>
<a class="sourceLine" id="cb78-9" data-line-number="9">  <span class="co"># When we define a custom __eq__, Python stops automatically inheriting the</span></a>
<a class="sourceLine" id="cb78-10" data-line-number="10">  <span class="co"># __hash__ method, so we need to define it as well</span></a>
<a class="sourceLine" id="cb78-11" data-line-number="11">  <span class="fu">__hash__</span> <span class="op">=</span> <span class="bu">str</span>.<span class="fu">__hash__</span></a>
<a class="sourceLine" id="cb78-12" data-line-number="12"></a>
<a class="sourceLine" id="cb78-13" data-line-number="13">some_dict <span class="op">=</span> {<span class="st">&#39;s&#39;</span>:<span class="dv">42</span>}</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> s <span class="op">=</span> SomeClass(<span class="st">&#39;s&#39;</span>)</a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> some_dict[s] <span class="op">=</span> <span class="dv">40</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> some_dict</a>
<a class="sourceLine" id="cb79-4" data-line-number="4">{<span class="st">&#39;s&#39;</span>: <span class="dv">40</span>}</a>
<a class="sourceLine" id="cb79-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> keys <span class="op">=</span> <span class="bu">list</span>(some_dict.keys())</a>
<a class="sourceLine" id="cb79-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(keys[<span class="dv">0</span>]), <span class="bu">type</span>(keys[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb79-7" data-line-number="7">(__main__.SomeClass, <span class="bu">str</span>)</a></code></pre></div></li>
</ul>
<hr />
<h3 id="lets-see-if-you-can-guess-this">▶ Let’s see if you can guess this?</h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb80-1" data-line-number="1">a, b <span class="op">=</span> a[b] <span class="op">=</span> {}, <span class="dv">5</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">{<span class="dv">5</span>: ({...}, <span class="dv">5</span>)}</a></code></pre></div>
<h4 id="explanation-25">💡 Explanation:</h4>
<ul>
<li><p>According to <a href="https://docs.python.org/2/reference/simple_stmts.html#assignment-statements">Python language reference</a>, assignment statements have the form</p>
<pre><code>(target_list &quot;=&quot;)+ (expression_list | yield_expression)</code></pre>
<p>and &gt; An assignment statement evaluates the expression list (remember that this can be a single expression or a comma-separated list, the latter yielding a tuple) and assigns the single resulting object to each of the target lists, from left to right.</p></li>
<li><p>The <code>+</code> in <code>(target_list &quot;=&quot;)+</code> means there can be <strong>one or more</strong> target lists. In this case, target lists are <code>a, b</code> and <code>a[b]</code> (note the expression list is exactly one, which in our case is <code>{}, 5</code>).</p></li>
<li><p>After the expression list is evaluated, it’s value is unpacked to the target lists from <strong>left to right</strong>. So, in our case, first the <code>{}, 5</code> tuple is unpacked to <code>a, b</code> and we now have <code>a = {}</code> and <code>b = 5</code>.</p></li>
<li><p><code>a</code> is now assigned to <code>{}</code> which is a mutable object.</p></li>
<li><p>The second target list is <code>a[b]</code> (you may expect this to throw an error because both <code>a</code> and <code>b</code> have not been defined in the statements before. But remember, we just assigned <code>a</code> to <code>{}</code> and <code>b</code> to <code>5</code>).</p></li>
<li><p>Now, we are setting the key <code>5</code> in the dictionary to the tuple <code>({}, 5)</code> creating a circular reference (the <code>{...}</code> in the output refers to the same object that <code>a</code> is already referencing). Another simpler example of circular reference could be</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_list <span class="op">=</span> some_list[<span class="dv">0</span>] <span class="op">=</span> [<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> some_list</a>
<a class="sourceLine" id="cb83-3" data-line-number="3">[[...]]</a>
<a class="sourceLine" id="cb83-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> some_list[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb83-5" data-line-number="5">[[...]]</a>
<a class="sourceLine" id="cb83-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> some_list <span class="kw">is</span> some_list[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb83-7" data-line-number="7"><span class="va">True</span></a>
<a class="sourceLine" id="cb83-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> some_list[<span class="dv">0</span>][<span class="dv">0</span>][<span class="dv">0</span>][<span class="dv">0</span>][<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">==</span> some_list</a>
<a class="sourceLine" id="cb83-9" data-line-number="9"><span class="va">True</span></a></code></pre></div>
<p>Similar is the case in our example (<code>a[b][0]</code> is the same object as <code>a</code>)</p></li>
<li><p>So to sum it up, you can break the example down to</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb84-1" data-line-number="1">a, b <span class="op">=</span> {}, <span class="dv">5</span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2">a[b] <span class="op">=</span> a, b</a></code></pre></div>
<p>And the circular reference can be justified by the fact that <code>a[b][0]</code> is the same object as <code>a</code></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a[b][<span class="dv">0</span>] <span class="kw">is</span> a</a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="va">True</span></a></code></pre></div></li>
</ul>
<hr />
<hr />
<h2 id="section-appearances-are-deceptive">Section: Appearances are deceptive!</h2>
<h3 id="skipping-lines">▶ Skipping lines?</h3>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> value <span class="op">=</span> <span class="dv">11</span></a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> valuе <span class="op">=</span> <span class="dv">32</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> value</a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="dv">11</span></a></code></pre></div>
<p>Wut?</p>
<p><strong>Note:</strong> The easiest way to reproduce this is to simply copy the statements from the above snippet and paste them into your file/shell.</p>
<h4 id="explanation-26">💡 Explanation</h4>
<p>Some non-Western characters look identical to letters in the English alphabet but are considered distinct by the interpreter.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">ord</span>(<span class="st">&#39;е&#39;</span>) <span class="co"># cyrillic &#39;e&#39; (Ye)</span></a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="dv">1077</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="bu">ord</span>(<span class="st">&#39;e&#39;</span>) <span class="co"># latin &#39;e&#39;, as used in English and typed using standard keyboard</span></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="dv">101</span></a>
<a class="sourceLine" id="cb87-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;е&#39;</span> <span class="op">==</span> <span class="st">&#39;e&#39;</span></a>
<a class="sourceLine" id="cb87-6" data-line-number="6"><span class="va">False</span></a>
<a class="sourceLine" id="cb87-7" data-line-number="7"></a>
<a class="sourceLine" id="cb87-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> value <span class="op">=</span> <span class="dv">42</span> <span class="co"># latin e</span></a>
<a class="sourceLine" id="cb87-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> valuе <span class="op">=</span> <span class="dv">23</span> <span class="co"># cyrillic &#39;e&#39;, Python 2.x interpreter would raise a `SyntaxError` here</span></a>
<a class="sourceLine" id="cb87-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> value</a>
<a class="sourceLine" id="cb87-11" data-line-number="11"><span class="dv">42</span></a></code></pre></div>
<p>The built-in <code>ord()</code> function returns a character’s Unicode <a href="https://en.wikipedia.org/wiki/Code_point">code point</a>, and different code positions of Cyrillic ‘e’ and Latin ‘e’ justify the behavior of the above example.</p>
<hr />
<h3 id="teleportation">▶ Teleportation *</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb88-2" data-line-number="2"></a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="kw">def</span> energy_send(x):</a>
<a class="sourceLine" id="cb88-4" data-line-number="4">    <span class="co"># Initializing a numpy array</span></a>
<a class="sourceLine" id="cb88-5" data-line-number="5">    np.array([<span class="bu">float</span>(x)])</a>
<a class="sourceLine" id="cb88-6" data-line-number="6"></a>
<a class="sourceLine" id="cb88-7" data-line-number="7"><span class="kw">def</span> energy_receive():</a>
<a class="sourceLine" id="cb88-8" data-line-number="8">    <span class="co"># Return an empty numpy array</span></a>
<a class="sourceLine" id="cb88-9" data-line-number="9">    <span class="cf">return</span> np.empty((), dtype<span class="op">=</span>np.<span class="bu">float</span>).tolist()</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> energy_send(<span class="fl">123.456</span>)</a>
<a class="sourceLine" id="cb89-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> energy_receive()</a>
<a class="sourceLine" id="cb89-3" data-line-number="3"><span class="fl">123.456</span></a></code></pre></div>
<p>Where’s the Nobel Prize?</p>
<h4 id="explanation-27">💡 Explanation:</h4>
<ul>
<li>Notice that the numpy array created in the <code>energy_send</code> function is not returned, so that memory space is free to reallocate.</li>
<li><code>numpy.empty()</code> returns the next free memory slot without reinitializing it. This memory spot just happens to be the same one that was just freed (usually, but not always).</li>
</ul>
<hr />
<h3 id="well-something-is-fishy">▶ Well, something is fishy…</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">def</span> square(x):</a>
<a class="sourceLine" id="cb90-2" data-line-number="2">    <span class="co">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3"><span class="co">    A simple function to calculate the square of a number by addition.</span></a>
<a class="sourceLine" id="cb90-4" data-line-number="4"><span class="co">    &quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb90-5" data-line-number="5">    sum_so_far <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb90-6" data-line-number="6">    <span class="cf">for</span> counter <span class="kw">in</span> <span class="bu">range</span>(x):</a>
<a class="sourceLine" id="cb90-7" data-line-number="7">        sum_so_far <span class="op">=</span> sum_so_far <span class="op">+</span> x</a>
<a class="sourceLine" id="cb90-8" data-line-number="8">  <span class="cf">return</span> sum_so_far</a></code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> square(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb91-2" data-line-number="2"><span class="dv">10</span></a></code></pre></div>
<p>Shouldn’t that be 100?</p>
<p><strong>Note:</strong> If you’re not able to reproduce this, try running the file <a href="/mixed_tabs_and_spaces.py">mixed_tabs_and_spaces.py</a> via the shell.</p>
<h4 id="explanation-28">💡 Explanation</h4>
<ul>
<li><strong>Don’t mix tabs and spaces!</strong> The character just preceding return is a “tab”, and the code is indented by multiple of “4 spaces” elsewhere in the example.</li>
<li>This is how Python handles tabs: &gt; First, tabs are replaced (from left to right) by one to eight spaces such that the total number of characters up to and including the replacement is a multiple of eight &lt;…&gt;</li>
<li>So the “tab” at the last line of <code>square</code> function is replaced with eight spaces, and it gets into the loop.</li>
<li><p>Python 3 is kind enough to throw an error for such cases automatically.</p>
<p><strong>Output (Python 3.x):</strong> <code>py   TabError: inconsistent use of tabs and spaces in indentation</code></p></li>
</ul>
<hr />
<hr />
<h2 id="section-watch-out-for-the-landmines">Section: Watch out for the landmines!</h2>
<h3 id="modifying-a-dictionary-while-iterating-over-it">▶ Modifying a dictionary while iterating over it</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb92-1" data-line-number="1">x <span class="op">=</span> {<span class="dv">0</span>: <span class="va">None</span>}</a>
<a class="sourceLine" id="cb92-2" data-line-number="2"></a>
<a class="sourceLine" id="cb92-3" data-line-number="3"><span class="cf">for</span> i <span class="kw">in</span> x:</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">    <span class="kw">del</span> x[i]</a>
<a class="sourceLine" id="cb92-5" data-line-number="5">    x[i<span class="op">+</span><span class="dv">1</span>] <span class="op">=</span> <span class="va">None</span></a>
<a class="sourceLine" id="cb92-6" data-line-number="6">    <span class="bu">print</span>(i)</a></code></pre></div>
<p><strong>Output (Python 2.7- Python 3.5):</strong></p>
<pre><code>0
1
2
3
4
5
6
7</code></pre>
<p>Yes, it runs for exactly <strong>eight</strong> times and stops.</p>
<h4 id="explanation-29">💡 Explanation:</h4>
<ul>
<li>Iteration over a dictionary that you edit at the same time is not supported.</li>
<li>It runs eight times because that’s the point at which the dictionary resizes to hold more keys (we have eight deletion entries, so a resize is needed). This is actually an implementation detail.</li>
<li>How deleted keys are handled and when the resize occurs might be different for different Python implementations.</li>
<li>For more information, you may refer to this StackOverflow <a href="https://stackoverflow.com/questions/44763802/bug-in-python-dict">thread</a> explaining a similar example in detail.</li>
</ul>
<hr />
<h3 id="stubborn-del-operator">▶ Stubborn <code>del</code> operator *</h3>
<div class="sourceCode" id="cb94"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">class</span> SomeClass:</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">    <span class="kw">def</span> <span class="fu">__del__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">        <span class="bu">print</span>(<span class="st">&quot;Deleted!&quot;</span>)</a></code></pre></div>
<p><strong>Output:</strong> 1.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> SomeClass()</a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> x</a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> x <span class="co"># this should print &quot;Deleted!&quot;</span></a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> y</a>
<a class="sourceLine" id="cb95-5" data-line-number="5">Deleted<span class="op">!</span></a></code></pre></div>
<p>Phew, deleted at last. You might have guessed what saved from <code>__del__</code> being called in our first attempt to delete <code>x</code>. Let’s add more twist to the example.</p>
<p>2.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> SomeClass()</a>
<a class="sourceLine" id="cb96-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> x</a>
<a class="sourceLine" id="cb96-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> x</a>
<a class="sourceLine" id="cb96-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> y <span class="co"># check if y exists</span></a>
<a class="sourceLine" id="cb96-5" data-line-number="5"><span class="op">&lt;</span>__main__.SomeClass instance at <span class="bn">0x7f98a1a67fc8</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb96-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> y <span class="co"># Like previously, this should print &quot;Deleted!&quot;</span></a>
<a class="sourceLine" id="cb96-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">globals</span>() <span class="co"># oh, it didn&#39;t. Let&#39;s check all our global variables and confirm</span></a>
<a class="sourceLine" id="cb96-8" data-line-number="8">Deleted<span class="op">!</span></a>
<a class="sourceLine" id="cb96-9" data-line-number="9">{<span class="st">&#39;__builtins__&#39;</span>: <span class="op">&lt;</span>module <span class="st">&#39;__builtin__&#39;</span> (built<span class="op">-</span><span class="kw">in</span>)<span class="op">&gt;</span>, <span class="st">&#39;SomeClass&#39;</span>: <span class="op">&lt;</span><span class="kw">class</span> __main__.SomeClass at <span class="bn">0x7f98a1a5f668</span><span class="op">&gt;</span>, <span class="st">&#39;__package__&#39;</span>: <span class="va">None</span>, <span class="st">&#39;__name__&#39;</span>: <span class="st">&#39;__main__&#39;</span>, <span class="st">&#39;__doc__&#39;</span>: <span class="va">None</span>}</a></code></pre></div>
<p>Okay, now it’s deleted :confused:</p>
<h4 id="explanation-30">💡 Explanation:</h4>
<ul>
<li><code>del x</code> doesn’t directly call <code>x.__del__()</code>.</li>
<li>Whenever <code>del x</code> is encountered, Python decrements the reference count for <code>x</code> by one, and <code>x.__del__()</code> when x’s reference count reaches zero.</li>
<li>In the second output snippet, <code>y.__del__()</code> was not called because the previous statement (<code>&gt;&gt;&gt; y</code>) in the interactive interpreter created another reference to the same object, thus preventing the reference count to reach zero when <code>del y</code> was encountered.</li>
<li>Calling <code>globals</code> caused the existing reference to be destroyed and hence we can see “Deleted!” being printed (finally!).</li>
</ul>
<hr />
<h3 id="deleting-a-list-item-while-iterating">▶ Deleting a list item while iterating</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb97-1" data-line-number="1">list_1 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb97-2" data-line-number="2">list_2 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb97-3" data-line-number="3">list_3 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb97-4" data-line-number="4">list_4 <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb97-5" data-line-number="5"></a>
<a class="sourceLine" id="cb97-6" data-line-number="6"><span class="cf">for</span> idx, item <span class="kw">in</span> <span class="bu">enumerate</span>(list_1):</a>
<a class="sourceLine" id="cb97-7" data-line-number="7">    <span class="kw">del</span> item</a>
<a class="sourceLine" id="cb97-8" data-line-number="8"></a>
<a class="sourceLine" id="cb97-9" data-line-number="9"><span class="cf">for</span> idx, item <span class="kw">in</span> <span class="bu">enumerate</span>(list_2):</a>
<a class="sourceLine" id="cb97-10" data-line-number="10">    list_2.remove(item)</a>
<a class="sourceLine" id="cb97-11" data-line-number="11"></a>
<a class="sourceLine" id="cb97-12" data-line-number="12"><span class="cf">for</span> idx, item <span class="kw">in</span> <span class="bu">enumerate</span>(list_3[:]):</a>
<a class="sourceLine" id="cb97-13" data-line-number="13">    list_3.remove(item)</a>
<a class="sourceLine" id="cb97-14" data-line-number="14"></a>
<a class="sourceLine" id="cb97-15" data-line-number="15"><span class="cf">for</span> idx, item <span class="kw">in</span> <span class="bu">enumerate</span>(list_4):</a>
<a class="sourceLine" id="cb97-16" data-line-number="16">    list_4.pop(idx)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> list_1</a>
<a class="sourceLine" id="cb98-2" data-line-number="2">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb98-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> list_2</a>
<a class="sourceLine" id="cb98-4" data-line-number="4">[<span class="dv">2</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb98-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> list_3</a>
<a class="sourceLine" id="cb98-6" data-line-number="6">[]</a>
<a class="sourceLine" id="cb98-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> list_4</a>
<a class="sourceLine" id="cb98-8" data-line-number="8">[<span class="dv">2</span>, <span class="dv">4</span>]</a></code></pre></div>
<p>Can you guess why the output is <code>[2, 4]</code>?</p>
<h4 id="explanation-31">💡 Explanation:</h4>
<ul>
<li><p>It’s never a good idea to change the object you’re iterating over. The correct way to do so is to iterate over a copy of the object instead, and <code>list_3[:]</code> does just that.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(some_list)</a>
<a class="sourceLine" id="cb99-3" data-line-number="3"><span class="dv">139798789457608</span></a>
<a class="sourceLine" id="cb99-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(some_list[:]) <span class="co"># Notice that python creates new object for sliced list.</span></a>
<a class="sourceLine" id="cb99-5" data-line-number="5"><span class="dv">139798779601192</span></a></code></pre></div></li>
</ul>
<p><strong>Difference between <code>del</code>, <code>remove</code>, and <code>pop</code>:</strong> * <code>del var_name</code> just removes the binding of the <code>var_name</code> from the local or global namespace (That’s why the <code>list_1</code> is unaffected). * <code>remove</code> removes the first matching value, not a specific index, raises <code>ValueError</code> if the value is not found. * <code>pop</code> removes the element at a specific index and returns it, raises <code>IndexError</code> if an invalid index is specified.</p>
<p><strong>Why the output is <code>[2, 4]</code>?</strong> - The list iteration is done index by index, and when we remove <code>1</code> from <code>list_2</code> or <code>list_4</code>, the contents of the lists are now <code>[2, 3, 4]</code>. The remaining elements are shifted down, i.e., <code>2</code> is at index 0, and <code>3</code> is at index 1. Since the next iteration is going to look at index 1 (which is the <code>3</code>), the <code>2</code> gets skipped entirely. A similar thing will happen with every alternate element in the list sequence.</p>
<ul>
<li>Refer to this StackOverflow <a href="https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it">thread</a> explaining the example</li>
<li>See also this nice StackOverflow <a href="https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items">thread</a> for a similar example related to dictionaries in Python.</li>
</ul>
<hr />
<h3 id="loop-variables-leaking-out">▶ Loop variables leaking out!</h3>
<p>1.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</a>
<a class="sourceLine" id="cb100-2" data-line-number="2">    <span class="cf">if</span> x <span class="op">==</span> <span class="dv">6</span>:</a>
<a class="sourceLine" id="cb100-3" data-line-number="3">        <span class="bu">print</span>(x, <span class="st">&#39;: for x inside loop&#39;</span>)</a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="bu">print</span>(x, <span class="st">&#39;: x in global&#39;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb101-1" data-line-number="1"><span class="dv">6</span> : <span class="cf">for</span> x inside loop</a>
<a class="sourceLine" id="cb101-2" data-line-number="2"><span class="dv">6</span> : x <span class="kw">in</span> <span class="kw">global</span></a></code></pre></div>
<p>But <code>x</code> was never defined outside the scope of for loop…</p>
<p>2.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="co"># This time let&#39;s initialize x first</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">x <span class="op">=</span> <span class="dv">-1</span></a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>):</a>
<a class="sourceLine" id="cb102-4" data-line-number="4">    <span class="cf">if</span> x <span class="op">==</span> <span class="dv">6</span>:</a>
<a class="sourceLine" id="cb102-5" data-line-number="5">        <span class="bu">print</span>(x, <span class="st">&#39;: for x inside loop&#39;</span>)</a>
<a class="sourceLine" id="cb102-6" data-line-number="6"><span class="bu">print</span>(x, <span class="st">&#39;: x in global&#39;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="dv">6</span> : <span class="cf">for</span> x inside loop</a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="dv">6</span> : x <span class="kw">in</span> <span class="kw">global</span></a></code></pre></div>
<p>3.</p>
<pre><code>x = 1
print([x for x in range(5)])
print(x, &#39;: x in global&#39;)</code></pre>
<p><strong>Output (on Python 2.x):</strong></p>
<pre><code>[0, 1, 2, 3, 4]
(4, &#39;: x in global&#39;)</code></pre>
<p><strong>Output (on Python 3.x):</strong></p>
<pre><code>[0, 1, 2, 3, 4]
1 : x in global</code></pre>
<h4 id="explanation-32">💡 Explanation:</h4>
<ul>
<li><p>In Python, for-loops use the scope they exist in and leave their defined loop-variable behind. This also applies if we explicitly defined the for-loop variable in the global namespace before. In this case, it will rebind the existing variable.</p></li>
<li><p>The differences in the output of Python 2.x and Python 3.x interpreters for list comprehension example can be explained by following change documented in <a href="https://docs.python.org/3/whatsnew/3.0.html">What’s New In Python 3.0</a> documentation:</p>
<blockquote>
<p>“List comprehensions no longer support the syntactic form <code>[... for var in item1, item2, ...]</code>. Use <code>[... for var in (item1, item2, ...)]</code> instead. Also, note that list comprehensions have different semantics: they are closer to syntactic sugar for a generator expression inside a <code>list()</code> constructor, and in particular the loop control variables are no longer leaked into the surrounding scope.”</p>
</blockquote></li>
</ul>
<hr />
<h3 id="beware-of-default-mutable-arguments">▶ Beware of default mutable arguments!</h3>
<div class="sourceCode" id="cb107"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">def</span> some_func(default_arg<span class="op">=</span>[]):</a>
<a class="sourceLine" id="cb107-2" data-line-number="2">    default_arg.append(<span class="st">&quot;some_string&quot;</span>)</a>
<a class="sourceLine" id="cb107-3" data-line-number="3">    <span class="cf">return</span> default_arg</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_func()</a>
<a class="sourceLine" id="cb108-2" data-line-number="2">[<span class="st">&#39;some_string&#39;</span>]</a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> some_func()</a>
<a class="sourceLine" id="cb108-4" data-line-number="4">[<span class="st">&#39;some_string&#39;</span>, <span class="st">&#39;some_string&#39;</span>]</a>
<a class="sourceLine" id="cb108-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> some_func([])</a>
<a class="sourceLine" id="cb108-6" data-line-number="6">[<span class="st">&#39;some_string&#39;</span>]</a>
<a class="sourceLine" id="cb108-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> some_func()</a>
<a class="sourceLine" id="cb108-8" data-line-number="8">[<span class="st">&#39;some_string&#39;</span>, <span class="st">&#39;some_string&#39;</span>, <span class="st">&#39;some_string&#39;</span>]</a></code></pre></div>
<h4 id="explanation-33">💡 Explanation:</h4>
<ul>
<li><p>The default mutable arguments of functions in Python aren’t really initialized every time you call the function. Instead, the recently assigned value to them is used as the default value. When we explicitly passed <code>[]</code> to <code>some_func</code> as the argument, the default value of the <code>default_arg</code> variable was not used, so the function returned as expected.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">def</span> some_func(default_arg<span class="op">=</span>[]):</a>
<a class="sourceLine" id="cb109-2" data-line-number="2">    default_arg.append(<span class="st">&quot;some_string&quot;</span>)</a>
<a class="sourceLine" id="cb109-3" data-line-number="3">    <span class="cf">return</span> default_arg</a></code></pre></div>
<p><strong>Output:</strong> <code>py   &gt;&gt;&gt; some_func.__defaults__ #This will show the default argument values for the function   ([],)   &gt;&gt;&gt; some_func()   &gt;&gt;&gt; some_func.__defaults__   (['some_string'],)   &gt;&gt;&gt; some_func()   &gt;&gt;&gt; some_func.__defaults__   (['some_string', 'some_string'],)   &gt;&gt;&gt; some_func([])   &gt;&gt;&gt; some_func.__defaults__   (['some_string', 'some_string'],)</code></p></li>
<li><p>A common practice to avoid bugs due to mutable arguments is to assign <code>None</code> as the default value and later check if any value is passed to the function corresponding to that argument. Example:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">def</span> some_func(default_arg<span class="op">=</span><span class="va">None</span>):</a>
<a class="sourceLine" id="cb110-2" data-line-number="2">    <span class="cf">if</span> <span class="kw">not</span> default_arg:</a>
<a class="sourceLine" id="cb110-3" data-line-number="3">        default_arg <span class="op">=</span> []</a>
<a class="sourceLine" id="cb110-4" data-line-number="4">    default_arg.append(<span class="st">&quot;some_string&quot;</span>)</a>
<a class="sourceLine" id="cb110-5" data-line-number="5">    <span class="cf">return</span> default_arg</a></code></pre></div></li>
</ul>
<hr />
<h3 id="catching-the-exceptions">▶ Catching the Exceptions</h3>
<div class="sourceCode" id="cb111"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb111-1" data-line-number="1">some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb111-3" data-line-number="3">    <span class="co"># This should raise an ``IndexError``</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4">    <span class="bu">print</span>(some_list[<span class="dv">4</span>])</a>
<a class="sourceLine" id="cb111-5" data-line-number="5"><span class="cf">except</span> <span class="pp">IndexError</span>, <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb111-6" data-line-number="6">    <span class="bu">print</span>(<span class="st">&quot;Caught!&quot;</span>)</a>
<a class="sourceLine" id="cb111-7" data-line-number="7"></a>
<a class="sourceLine" id="cb111-8" data-line-number="8"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb111-9" data-line-number="9">    <span class="co"># This should raise a ``ValueError``</span></a>
<a class="sourceLine" id="cb111-10" data-line-number="10">    some_list.remove(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb111-11" data-line-number="11"><span class="cf">except</span> <span class="pp">IndexError</span>, <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb111-12" data-line-number="12">    <span class="bu">print</span>(<span class="st">&quot;Caught again!&quot;</span>)</a></code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<div class="sourceCode" id="cb112"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb112-1" data-line-number="1">Caught<span class="op">!</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2"></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="pp">ValueError</span>: <span class="bu">list</span>.remove(x): x <span class="kw">not</span> <span class="kw">in</span> <span class="bu">list</span></a></code></pre></div>
<p><strong>Output (Python 3.x):</strong></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb113-1" data-line-number="1">  File <span class="st">&quot;&lt;input&gt;&quot;</span>, line <span class="dv">3</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">    <span class="cf">except</span> <span class="pp">IndexError</span>, <span class="pp">ValueError</span>:</a>
<a class="sourceLine" id="cb113-3" data-line-number="3">                     <span class="op">^</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"><span class="pp">SyntaxError</span>: invalid syntax</a></code></pre></div>
<h4 id="explanation-34">💡 Explanation</h4>
<ul>
<li><p>To add multiple Exceptions to the except clause, you need to pass them as parenthesized tuple as the first argument. The second argument is an optional name, which when supplied will bind the Exception instance that has been raised. Example,</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb114-1" data-line-number="1">some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb114-3" data-line-number="3">   <span class="co"># This should raise a ``ValueError``</span></a>
<a class="sourceLine" id="cb114-4" data-line-number="4">   some_list.remove(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb114-5" data-line-number="5"><span class="cf">except</span> (<span class="pp">IndexError</span>, <span class="pp">ValueError</span>), e:</a>
<a class="sourceLine" id="cb114-6" data-line-number="6">   <span class="bu">print</span>(<span class="st">&quot;Caught again!&quot;</span>)</a>
<a class="sourceLine" id="cb114-7" data-line-number="7">   <span class="bu">print</span>(e)</a></code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<pre><code>Caught again!
list.remove(x): x not in list</code></pre>
<p><strong>Output (Python 3.x):</strong></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb116-1" data-line-number="1">  File <span class="st">&quot;&lt;input&gt;&quot;</span>, line <span class="dv">4</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">    <span class="cf">except</span> (<span class="pp">IndexError</span>, <span class="pp">ValueError</span>), e:</a>
<a class="sourceLine" id="cb116-3" data-line-number="3">                                     <span class="op">^</span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4"><span class="pp">IndentationError</span>: unindent does <span class="kw">not</span> match <span class="bu">any</span> outer indentation level</a></code></pre></div></li>
<li><p>Separating the exception from the variable with a comma is deprecated and does not work in Python 3; the correct way is to use <code>as</code>. Example,</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb117-1" data-line-number="1">some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a>
<a class="sourceLine" id="cb117-2" data-line-number="2"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb117-3" data-line-number="3">    some_list.remove(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb117-4" data-line-number="4"></a>
<a class="sourceLine" id="cb117-5" data-line-number="5"><span class="cf">except</span> (<span class="pp">IndexError</span>, <span class="pp">ValueError</span>) <span class="im">as</span> e:</a>
<a class="sourceLine" id="cb117-6" data-line-number="6">    <span class="bu">print</span>(<span class="st">&quot;Caught again!&quot;</span>)</a>
<a class="sourceLine" id="cb117-7" data-line-number="7">    <span class="bu">print</span>(e)</a></code></pre></div>
<p><strong>Output:</strong></p>
<pre><code>Caught again!
list.remove(x): x not in list</code></pre></li>
</ul>
<hr />
<h3 id="same-operands-different-story">▶ Same operands, different story!</h3>
<p>1.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb119-1" data-line-number="1">a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb119-2" data-line-number="2">b <span class="op">=</span> a</a>
<a class="sourceLine" id="cb119-3" data-line-number="3">a <span class="op">=</span> a <span class="op">+</span> [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb120"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a</a>
<a class="sourceLine" id="cb120-2" data-line-number="2">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> b</a>
<a class="sourceLine" id="cb120-4" data-line-number="4">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb121-1" data-line-number="1">a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</a>
<a class="sourceLine" id="cb121-2" data-line-number="2">b <span class="op">=</span> a</a>
<a class="sourceLine" id="cb121-3" data-line-number="3">a <span class="op">+=</span> [<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb122"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a</a>
<a class="sourceLine" id="cb122-2" data-line-number="2">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a>
<a class="sourceLine" id="cb122-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> b</a>
<a class="sourceLine" id="cb122-4" data-line-number="4">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</a></code></pre></div>
<h4 id="explanation-35">💡 Explanation:</h4>
<ul>
<li><p><code>a += b</code> doesn’t always behave the same way as <code>a = a + b</code>. Classes <em>may</em> implement the <em><code>op=</code></em> operators differently, and lists do this.</p></li>
<li><p>The expression <code>a = a + [5,6,7,8]</code> generates a new list and sets <code>a</code>’s reference to that new list, leaving <code>b</code> unchanged.</p></li>
<li><p>The expression <code>a += [5,6,7,8]</code> is actually mapped to an “extend” function that operates on the list such that <code>a</code> and <code>b</code> still point to the same list that has been modified in-place.</p></li>
</ul>
<hr />
<h3 id="the-out-of-scope-variable">▶ The out of scope variable</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb123-1" data-line-number="1">a <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="kw">def</span> some_func():</a>
<a class="sourceLine" id="cb123-3" data-line-number="3">    <span class="cf">return</span> a</a>
<a class="sourceLine" id="cb123-4" data-line-number="4"></a>
<a class="sourceLine" id="cb123-5" data-line-number="5"><span class="kw">def</span> another_func():</a>
<a class="sourceLine" id="cb123-6" data-line-number="6">    a <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7">    <span class="cf">return</span> a</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_func()</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="dv">1</span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> another_func()</a>
<a class="sourceLine" id="cb124-4" data-line-number="4"><span class="pp">UnboundLocalError</span>: local variable <span class="st">&#39;a&#39;</span> referenced before assignment</a></code></pre></div>
<h4 id="explanation-36">💡 Explanation:</h4>
<ul>
<li>When you make an assignment to a variable in scope, it becomes local to that scope. So <code>a</code> becomes local to the scope of <code>another_func</code>, but it has not been initialized previously in the same scope which throws an error.</li>
<li>Read <a href="http://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html">this</a> short but an awesome guide to learn more about how namespaces and scope resolution works in Python.</li>
<li><p>To modify the outer scope variable <code>a</code> in <code>another_func</code>, use <code>global</code> keyword.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="kw">def</span> another_func()</a>
<a class="sourceLine" id="cb125-2" data-line-number="2">    <span class="kw">global</span> a</a>
<a class="sourceLine" id="cb125-3" data-line-number="3">    a <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4">    <span class="cf">return</span> a</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb126"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> another_func()</a>
<a class="sourceLine" id="cb126-2" data-line-number="2"><span class="dv">2</span></a></code></pre></div></li>
</ul>
<hr />
<h3 id="be-careful-with-chained-operations">▶ Be careful with chained operations</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> (<span class="va">False</span> <span class="op">==</span> <span class="va">False</span>) <span class="kw">in</span> [<span class="va">False</span>] <span class="co"># makes sense</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="va">False</span></a>
<a class="sourceLine" id="cb127-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="va">False</span> <span class="op">==</span> (<span class="va">False</span> <span class="kw">in</span> [<span class="va">False</span>]) <span class="co"># makes sense</span></a>
<a class="sourceLine" id="cb127-4" data-line-number="4"><span class="va">False</span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> <span class="va">False</span> <span class="op">==</span> <span class="va">False</span> <span class="kw">in</span> [<span class="va">False</span>] <span class="co"># now what?</span></a>
<a class="sourceLine" id="cb127-6" data-line-number="6"><span class="va">True</span></a>
<a class="sourceLine" id="cb127-7" data-line-number="7"></a>
<a class="sourceLine" id="cb127-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> <span class="va">True</span> <span class="kw">is</span> <span class="va">False</span> <span class="op">==</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb127-9" data-line-number="9"><span class="va">False</span></a>
<a class="sourceLine" id="cb127-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> <span class="va">False</span> <span class="kw">is</span> <span class="va">False</span> <span class="kw">is</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb127-11" data-line-number="11"><span class="va">True</span></a>
<a class="sourceLine" id="cb127-12" data-line-number="12"></a>
<a class="sourceLine" id="cb127-13" data-line-number="13"><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&lt;</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb127-14" data-line-number="14"><span class="va">True</span></a>
<a class="sourceLine" id="cb127-15" data-line-number="15"><span class="op">&gt;&gt;&gt;</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">&lt;</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb127-16" data-line-number="16"><span class="va">False</span></a>
<a class="sourceLine" id="cb127-17" data-line-number="17"><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">&gt;</span> (<span class="dv">0</span> <span class="op">&lt;</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb127-18" data-line-number="18"><span class="va">False</span></a></code></pre></div>
<h4 id="explanation-37">💡 Explanation:</h4>
<p>As per https://docs.python.org/2/reference/expressions.html#not-in</p>
<blockquote>
<p>Formally, if a, b, c, …, y, z are expressions and op1, op2, …, opN are comparison operators, then a op1 b op2 c … y opN z is equivalent to a op1 b and b op2 c and … y opN z, except that each expression is evaluated at most once.</p>
</blockquote>
<p>While such behavior might seem silly to you in the above examples, it’s fantastic with stuff like <code>a == b == c</code> and <code>0 &lt;= x &lt;= 100</code>.</p>
<ul>
<li><code>False is False is False</code> is equivalent to <code>(False is False) and (False is False)</code></li>
<li><code>True is False == False</code> is equivalent to <code>True is False and False == False</code> and since the first part of the statement (<code>True is False</code>) evaluates to <code>False</code>, the overall expression evaluates to <code>False</code>.</li>
<li><code>1 &gt; 0 &lt; 1</code> is equivalent to <code>1 &gt; 0 and 0 &lt; 1</code> which evaluates to <code>True</code>.</li>
<li><p>The expression <code>(1 &gt; 0) &lt; 1</code> is equivalent to <code>True &lt; 1</code> and</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="va">True</span>)</a>
<a class="sourceLine" id="cb128-2" data-line-number="2"><span class="dv">1</span></a>
<a class="sourceLine" id="cb128-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="va">True</span> <span class="op">+</span> <span class="dv">1</span> <span class="co">#not relevant for this example, but just for fun</span></a>
<a class="sourceLine" id="cb128-4" data-line-number="4"><span class="dv">2</span></a></code></pre></div>
<p>So, <code>1 &lt; 1</code> evaluates to <code>False</code></p></li>
</ul>
<hr />
<h3 id="name-resolution-ignoring-class-scope">▶ Name resolution ignoring class scope</h3>
<p>1.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb129-1" data-line-number="1">x <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="kw">class</span> SomeClass:</a>
<a class="sourceLine" id="cb129-3" data-line-number="3">    x <span class="op">=</span> <span class="dv">17</span></a>
<a class="sourceLine" id="cb129-4" data-line-number="4">    y <span class="op">=</span> (x <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>))</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(SomeClass.y)[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="dv">5</span></a></code></pre></div>
<p>2.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb131-1" data-line-number="1">x <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="kw">class</span> SomeClass:</a>
<a class="sourceLine" id="cb131-3" data-line-number="3">    x <span class="op">=</span> <span class="dv">17</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4">    y <span class="op">=</span> [x <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>)]</a></code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> SomeClass.y[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="dv">17</span></a></code></pre></div>
<p><strong>Output (Python 3.x):</strong></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> SomeClass.y[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb133-2" data-line-number="2"><span class="dv">5</span></a></code></pre></div>
<h4 id="explanation-38">💡 Explanation</h4>
<ul>
<li>Scopes nested inside class definition ignore names bound at the class level.</li>
<li>A generator expression has its own scope.</li>
<li>Starting from Python 3.X, list comprehensions also have their own scope.</li>
</ul>
<hr />
<h3 id="needle-in-a-haystack">▶ Needle in a Haystack</h3>
<p>1.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb134-1" data-line-number="1">x, y <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">1</span>) <span class="cf">if</span> <span class="va">True</span> <span class="cf">else</span> <span class="va">None</span>, <span class="va">None</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<pre><code>&gt;&gt;&gt; x, y  # expected (0, 1)
((0, 1), None)</code></pre>
<p>Almost every Python programmer has faced a similar situation.</p>
<p>2.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb136-1" data-line-number="1">t <span class="op">=</span> (<span class="st">&#39;one&#39;</span>, <span class="st">&#39;two&#39;</span>)</a>
<a class="sourceLine" id="cb136-2" data-line-number="2"><span class="cf">for</span> i <span class="kw">in</span> t:</a>
<a class="sourceLine" id="cb136-3" data-line-number="3">    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb136-4" data-line-number="4"></a>
<a class="sourceLine" id="cb136-5" data-line-number="5">t <span class="op">=</span> (<span class="st">&#39;one&#39;</span>)</a>
<a class="sourceLine" id="cb136-6" data-line-number="6"><span class="cf">for</span> i <span class="kw">in</span> t:</a>
<a class="sourceLine" id="cb136-7" data-line-number="7">    <span class="bu">print</span>(i)</a>
<a class="sourceLine" id="cb136-8" data-line-number="8"></a>
<a class="sourceLine" id="cb136-9" data-line-number="9">t <span class="op">=</span> ()</a>
<a class="sourceLine" id="cb136-10" data-line-number="10"><span class="bu">print</span>(t)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb137-1" data-line-number="1">one</a>
<a class="sourceLine" id="cb137-2" data-line-number="2">two</a>
<a class="sourceLine" id="cb137-3" data-line-number="3">o</a>
<a class="sourceLine" id="cb137-4" data-line-number="4">n</a>
<a class="sourceLine" id="cb137-5" data-line-number="5">e</a>
<a class="sourceLine" id="cb137-6" data-line-number="6"><span class="bu">tuple</span>()</a></code></pre></div>
<h4 id="explanation-39">💡 Explanation:</h4>
<ul>
<li>For 1, the correct statement for expected behavior is <code>x, y = (0, 1) if True else (None, None)</code>.</li>
<li>For 2, the correct statement for expected behavior is <code>t = ('one',)</code> or <code>t = 'one',</code> (missing comma) otherwise the interpreter considers <code>t</code> to be a <code>str</code> and iterates over it character by character.</li>
<li><code>()</code> is a special token and denotes empty <code>tuple</code>.</li>
</ul>
<hr />
<hr />
<h2 id="section-the-hidden-treasures">Section: The Hidden treasures!</h2>
<p>This section contains few of the lesser-known interesting things about Python that most beginners like me are unaware of (well, not anymore).</p>
<h3 id="okay-python-can-you-make-me-fly">▶ Okay Python, Can you make me fly? *</h3>
<p>Well, here you go</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="im">import</span> antigravity</a></code></pre></div>
<p><strong>Output:</strong> Sshh.. It’s a super secret.</p>
<h4 id="explanation-40">💡 Explanation:</h4>
<ul>
<li><code>antigravity</code> module is one of the few easter eggs released by Python developers.</li>
<li><code>import antigravity</code> opens up a web browser pointing to the <a href="http://xkcd.com/353/">classic XKCD comic</a> about Python.</li>
<li>Well, there’s more to it. There’s <strong>another easter egg inside the easter egg</strong>. If look at the <a href="https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17">code</a>, there’s a function defined that purports to implement the <a href="https://xkcd.com/426/">XKCD’s geohashing algorithm</a>.</li>
</ul>
<hr />
<h3 id="goto-but-why">▶ <code>goto</code>, but why? *</h3>
<div class="sourceCode" id="cb139"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="im">from</span> goto <span class="im">import</span> goto, label</a>
<a class="sourceLine" id="cb139-2" data-line-number="2"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</a>
<a class="sourceLine" id="cb139-3" data-line-number="3">    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</a>
<a class="sourceLine" id="cb139-4" data-line-number="4">        <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>):</a>
<a class="sourceLine" id="cb139-5" data-line-number="5">            <span class="bu">print</span>(<span class="st">&quot;I&#39;m trapped, please rescue!&quot;</span>)</a>
<a class="sourceLine" id="cb139-6" data-line-number="6">            <span class="cf">if</span> k <span class="op">==</span> <span class="dv">2</span>:</a>
<a class="sourceLine" id="cb139-7" data-line-number="7">                goto .breakout <span class="co"># breaking out from a deeply nested loop</span></a>
<a class="sourceLine" id="cb139-8" data-line-number="8">label .breakout</a>
<a class="sourceLine" id="cb139-9" data-line-number="9"><span class="bu">print</span>(<span class="st">&quot;Freedom!&quot;</span>)</a></code></pre></div>
<p><strong>Output (Python 2.3):</strong></p>
<div class="sourceCode" id="cb140"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb140-1" data-line-number="1">I<span class="st">&#39;m trapped, please rescue!</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="st">I&#39;</span>m trapped, please rescue<span class="op">!</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3">Freedom<span class="op">!</span></a></code></pre></div>
<h4 id="explanation-41">💡 Explanation:</h4>
<ul>
<li>A working version of <code>goto</code> in Python was <a href="https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html">announced</a> as an April Fool’s joke on 1st April 2004.</li>
<li>Current versions of Python do not have this module.</li>
<li>Although it works, but please don’t use it. Here’s the <a href="https://docs.python.org/3/faq/design.html#why-is-there-no-goto">reason</a> to why <code>goto</code> is not present in Python.</li>
</ul>
<hr />
<h3 id="brace-yourself">▶ Brace yourself! *</h3>
<p>If you are one of the people who doesn’t like using whitespace in Python to denote scopes, you can use the C-style {} by importing,</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="im">from</span> __future__ <span class="im">import</span> braces</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb142-1" data-line-number="1">  File <span class="st">&quot;some_file.py&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2">    <span class="im">from</span> __future__ <span class="im">import</span> braces</a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="pp">SyntaxError</span>: <span class="kw">not</span> a chance</a></code></pre></div>
<p>Braces? No way! If you think that’s disappointing, use Java.</p>
<h4 id="explanation-42">💡 Explanation:</h4>
<ul>
<li>The <code>__future__</code> module is normally used to provide features from future versions of Python. The “future” here is however ironic.</li>
<li>This is an easter egg concerned with the community’s feelings on this issue.</li>
</ul>
<hr />
<h3 id="lets-meet-friendly-language-uncle-for-life">▶ Let’s meet Friendly Language Uncle For Life *</h3>
<p><strong>Output (Python 3.x)</strong></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> __future__ <span class="im">import</span> barry_as_FLUFL</a>
<a class="sourceLine" id="cb143-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Ruby&quot;</span> <span class="op">!=</span> <span class="st">&quot;Python&quot;</span> <span class="co"># there&#39;s no doubt about it</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3">  File <span class="st">&quot;some_file.py&quot;</span>, line <span class="dv">1</span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4">    <span class="co">&quot;Ruby&quot;</span> <span class="op">!=</span> <span class="st">&quot;Python&quot;</span></a>
<a class="sourceLine" id="cb143-5" data-line-number="5">              <span class="op">^</span></a>
<a class="sourceLine" id="cb143-6" data-line-number="6"><span class="pp">SyntaxError</span>: invalid syntax</a>
<a class="sourceLine" id="cb143-7" data-line-number="7"></a>
<a class="sourceLine" id="cb143-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Ruby&quot;</span> <span class="op">&lt;&gt;</span> <span class="st">&quot;Python&quot;</span></a>
<a class="sourceLine" id="cb143-9" data-line-number="9"><span class="va">True</span></a></code></pre></div>
<p>There we go.</p>
<h4 id="explanation-43">💡 Explanation:</h4>
<ul>
<li>This is relevant to <a href="https://www.python.org/dev/peps/pep-0401/">PEP-401</a> released on April 1, 2009 (now you know, what it means).</li>
<li>Quoting from the PEP-401 &gt; Recognized that the != inequality operator in Python 3.0 was a horrible, finger pain inducing mistake, the FLUFL reinstates the &lt;&gt; diamond operator as the sole spelling.</li>
<li>There were more things that Uncle Barry had to share in the PEP; you can read them <a href="https://www.python.org/dev/peps/pep-0401/">here</a>.</li>
</ul>
<hr />
<h3 id="even-python-understands-that-love-is-complicated">▶ Even Python understands that love is complicated *</h3>
<div class="sourceCode" id="cb144"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="im">import</span> this</a></code></pre></div>
<p>Wait, what’s <strong>this</strong>? <code>this</code> is love :heart:</p>
<p><strong>Output:</strong></p>
<pre><code>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you&#39;re Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it&#39;s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let&#39;s do more of those!</code></pre>
<p>It’s the Zen of Python!</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> love <span class="op">=</span> this</a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> this <span class="kw">is</span> love</a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="va">True</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> love <span class="kw">is</span> <span class="va">True</span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="va">False</span></a>
<a class="sourceLine" id="cb146-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> love <span class="kw">is</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb146-7" data-line-number="7"><span class="va">False</span></a>
<a class="sourceLine" id="cb146-8" data-line-number="8"><span class="op">&gt;&gt;&gt;</span> love <span class="kw">is</span> <span class="kw">not</span> <span class="va">True</span> <span class="kw">or</span> <span class="va">False</span></a>
<a class="sourceLine" id="cb146-9" data-line-number="9"><span class="va">True</span></a>
<a class="sourceLine" id="cb146-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> love <span class="kw">is</span> <span class="kw">not</span> <span class="va">True</span> <span class="kw">or</span> <span class="va">False</span><span class="op">;</span> love <span class="kw">is</span> love  <span class="co"># Love is complicated</span></a>
<a class="sourceLine" id="cb146-11" data-line-number="11"><span class="va">True</span></a></code></pre></div>
<h4 id="explanation-44">💡 Explanation:</h4>
<ul>
<li><code>this</code> module in Python is an easter egg for The Zen Of Python (<a href="https://www.python.org/dev/peps/pep-0020">PEP 20</a>).</li>
<li>And if you think that’s already interesting enough, check out the implementation of <a href="https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py">this.py</a>. Interestingly, the code for the Zen violates itself (and that’s probably the only place where this happens).</li>
<li>Regarding the statement <code>love is not True or False; love is love</code>, ironic but it’s self-explanatory.</li>
</ul>
<hr />
<h3 id="yes-it-exists">▶ Yes, it exists!</h3>
<p><strong>The <code>else</code> clause for loops.</strong> One typical example might be:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb147-1" data-line-number="1">  <span class="kw">def</span> does_exists_num(l, to_find):</a>
<a class="sourceLine" id="cb147-2" data-line-number="2">      <span class="cf">for</span> num <span class="kw">in</span> l:</a>
<a class="sourceLine" id="cb147-3" data-line-number="3">          <span class="cf">if</span> num <span class="op">==</span> to_find:</a>
<a class="sourceLine" id="cb147-4" data-line-number="4">              <span class="bu">print</span>(<span class="st">&quot;Exists!&quot;</span>)</a>
<a class="sourceLine" id="cb147-5" data-line-number="5">              <span class="cf">break</span></a>
<a class="sourceLine" id="cb147-6" data-line-number="6">      <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb147-7" data-line-number="7">          <span class="bu">print</span>(<span class="st">&quot;Does not exist&quot;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</a>
<a class="sourceLine" id="cb148-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> does_exists_num(some_list, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb148-3" data-line-number="3">Exists<span class="op">!</span></a>
<a class="sourceLine" id="cb148-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> does_exists_num(some_list, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb148-5" data-line-number="5">Does <span class="kw">not</span> exist</a></code></pre></div>
<p><strong>The <code>else</code> clause in exception handling.</strong> An example,</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb149-2" data-line-number="2">    <span class="cf">pass</span></a>
<a class="sourceLine" id="cb149-3" data-line-number="3"><span class="cf">except</span>:</a>
<a class="sourceLine" id="cb149-4" data-line-number="4">    <span class="bu">print</span>(<span class="st">&quot;Exception occurred!!!&quot;</span>)</a>
<a class="sourceLine" id="cb149-5" data-line-number="5"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb149-6" data-line-number="6">    <span class="bu">print</span>(<span class="st">&quot;Try block executed successfully...&quot;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb150-1" data-line-number="1">Try block executed successfully...</a></code></pre></div>
<h4 id="explanation-45">💡 Explanation:</h4>
<ul>
<li>The <code>else</code> clause after a loop is executed only when there’s no explicit <code>break</code> after all the iterations.</li>
<li><code>else</code> clause after try block is also called “completion clause” as reaching the <code>else</code> clause in a <code>try</code> statement means that the try block actually completed successfully.</li>
</ul>
<hr />
<h3 id="inpinity">▶ Inpinity *</h3>
<p>The spelling is intended. Please, don’t submit a patch for this.</p>
<p><strong>Output (Python 3.x):</strong></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> infinity <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;infinity&#39;</span>)</a>
<a class="sourceLine" id="cb151-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> <span class="bu">hash</span>(infinity)</a>
<a class="sourceLine" id="cb151-3" data-line-number="3"><span class="dv">314159</span></a>
<a class="sourceLine" id="cb151-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="bu">hash</span>(<span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>))</a>
<a class="sourceLine" id="cb151-5" data-line-number="5"><span class="dv">-314159</span></a></code></pre></div>
<h4 id="explanation-46">💡 Explanation:</h4>
<ul>
<li>Hash of infinity is 10⁵ x π.</li>
<li>Interestingly, the hash of <code>float('-inf')</code> is “-10⁵ x π” in Python 3, whereas “-10⁵ x e” in Python 2.</li>
</ul>
<hr />
<h3 id="mangling-time">▶ Mangling time! *</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="kw">class</span> Yo(<span class="bu">object</span>):</a>
<a class="sourceLine" id="cb152-2" data-line-number="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</a>
<a class="sourceLine" id="cb152-3" data-line-number="3">        <span class="va">self</span>.__honey <span class="op">=</span> <span class="va">True</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4">        <span class="va">self</span>.bitch <span class="op">=</span> <span class="va">True</span></a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> Yo().bitch</a>
<a class="sourceLine" id="cb153-2" data-line-number="2"><span class="va">True</span></a>
<a class="sourceLine" id="cb153-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> Yo().__honey</a>
<a class="sourceLine" id="cb153-4" data-line-number="4"><span class="pp">AttributeError</span>: <span class="st">&#39;Yo&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;__honey&#39;</span></a>
<a class="sourceLine" id="cb153-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> Yo()._Yo__honey</a>
<a class="sourceLine" id="cb153-6" data-line-number="6"><span class="va">True</span></a></code></pre></div>
<p>Why did <code>Yo()._Yo__honey</code> work? Only Indian readers would understand.</p>
<h4 id="explanation-47">💡 Explanation:</h4>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Name_mangling">Name Mangling</a> is used to avoid naming collisions between different namespaces.</li>
<li>In Python, the interpreter modifies (mangles) the class member names starting with <code>__</code> (double underscore) and not ending with more than one trailing underscore by adding <code>_NameOfTheClass</code> in front.</li>
<li>So, to access <code>__honey</code> attribute, we are required to append <code>_Yo</code> to the front which would prevent conflicts with the same name attribute defined in any other class.</li>
</ul>
<hr />
<hr />
<h2 id="section-miscellaneous">Section: Miscellaneous</h2>
<h3 id="is-faster">▶ <code>+=</code> is faster</h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="co"># using &quot;+&quot;, three strings:</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> timeit.timeit(<span class="st">&quot;s1 = s1 + s2 + s3&quot;</span>, setup<span class="op">=</span><span class="st">&quot;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&quot;</span>, number<span class="op">=</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb154-3" data-line-number="3"><span class="fl">0.25748300552368164</span></a>
<a class="sourceLine" id="cb154-4" data-line-number="4"><span class="co"># using &quot;+=&quot;, three strings:</span></a>
<a class="sourceLine" id="cb154-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> timeit.timeit(<span class="st">&quot;s1 += s2 + s3&quot;</span>, setup<span class="op">=</span><span class="st">&quot;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&quot;</span>, number<span class="op">=</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb154-6" data-line-number="6"><span class="fl">0.012188911437988281</span></a></code></pre></div>
<h4 id="explanation-48">💡 Explanation:</h4>
<ul>
<li><code>+=</code> is faster than <code>+</code> for concatenating more than two strings because the first string (example, <code>s1</code> for <code>s1 += s2 + s3</code>) is not destroyed while calculating the complete string.</li>
</ul>
<hr />
<h3 id="lets-make-a-giant-string">▶ Let’s make a giant string!</h3>
<div class="sourceCode" id="cb155"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">def</span> add_string_with_plus(iters):</a>
<a class="sourceLine" id="cb155-2" data-line-number="2">    s <span class="op">=</span> <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb155-3" data-line-number="3">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(iters):</a>
<a class="sourceLine" id="cb155-4" data-line-number="4">        s <span class="op">+=</span> <span class="st">&quot;xyz&quot;</span></a>
<a class="sourceLine" id="cb155-5" data-line-number="5">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb155-6" data-line-number="6"></a>
<a class="sourceLine" id="cb155-7" data-line-number="7"><span class="kw">def</span> add_bytes_with_plus(iters):</a>
<a class="sourceLine" id="cb155-8" data-line-number="8">    s <span class="op">=</span> b<span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb155-9" data-line-number="9">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(iters):</a>
<a class="sourceLine" id="cb155-10" data-line-number="10">        s <span class="op">+=</span> b<span class="st">&quot;xyz&quot;</span></a>
<a class="sourceLine" id="cb155-11" data-line-number="11">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb155-12" data-line-number="12"></a>
<a class="sourceLine" id="cb155-13" data-line-number="13"><span class="kw">def</span> add_string_with_format(iters):</a>
<a class="sourceLine" id="cb155-14" data-line-number="14">    fs <span class="op">=</span> <span class="st">&quot;</span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb155-15" data-line-number="15">    s <span class="op">=</span> fs.<span class="bu">format</span>(<span class="op">*</span>([<span class="st">&quot;xyz&quot;</span>]<span class="op">*</span>iters))</a>
<a class="sourceLine" id="cb155-16" data-line-number="16">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb155-17" data-line-number="17"></a>
<a class="sourceLine" id="cb155-18" data-line-number="18"><span class="kw">def</span> add_string_with_join(iters):</a>
<a class="sourceLine" id="cb155-19" data-line-number="19">    l <span class="op">=</span> []</a>
<a class="sourceLine" id="cb155-20" data-line-number="20">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(iters):</a>
<a class="sourceLine" id="cb155-21" data-line-number="21">        l.append(<span class="st">&quot;xyz&quot;</span>)</a>
<a class="sourceLine" id="cb155-22" data-line-number="22">    s <span class="op">=</span> <span class="st">&quot;&quot;</span>.join(l)</a>
<a class="sourceLine" id="cb155-23" data-line-number="23">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb155-24" data-line-number="24"></a>
<a class="sourceLine" id="cb155-25" data-line-number="25"><span class="kw">def</span> convert_list_to_string(l, iters):</a>
<a class="sourceLine" id="cb155-26" data-line-number="26">    s <span class="op">=</span> <span class="st">&quot;&quot;</span>.join(l)</a>
<a class="sourceLine" id="cb155-27" data-line-number="27">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_plus(<span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb156-2" data-line-number="2"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">972</span> µs per loop</a>
<a class="sourceLine" id="cb156-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> timeit(add_bytes_with_plus(<span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb156-4" data-line-number="4"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">815</span> µs per loop</a>
<a class="sourceLine" id="cb156-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_format(<span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb156-6" data-line-number="6"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">508</span> µs per loop</a>
<a class="sourceLine" id="cb156-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_join(<span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb156-8" data-line-number="8"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">878</span> µs per loop</a>
<a class="sourceLine" id="cb156-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> [<span class="st">&quot;xyz&quot;</span>]<span class="op">*</span><span class="dv">10000</span></a>
<a class="sourceLine" id="cb156-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> timeit(convert_list_to_string(l, <span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb156-11" data-line-number="11"><span class="dv">10000</span> loops, best of <span class="dv">3</span>: <span class="dv">80</span> µs per loop</a></code></pre></div>
<p>Let’s increase the number of iterations by a factor of 10.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_plus(<span class="dv">100000</span>)) <span class="co"># Linear increase in execution time</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2"><span class="dv">100</span> loops, best of <span class="dv">3</span>: <span class="fl">9.75</span> ms per loop</a>
<a class="sourceLine" id="cb157-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> timeit(add_bytes_with_plus(<span class="dv">100000</span>)) <span class="co"># Quadratic increase</span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">974</span> ms per loop</a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_format(<span class="dv">100000</span>)) <span class="co"># Linear increase</span></a>
<a class="sourceLine" id="cb157-6" data-line-number="6"><span class="dv">100</span> loops, best of <span class="dv">3</span>: <span class="fl">5.25</span> ms per loop</a>
<a class="sourceLine" id="cb157-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_join(<span class="dv">100000</span>)) <span class="co"># Linear increase</span></a>
<a class="sourceLine" id="cb157-8" data-line-number="8"><span class="dv">100</span> loops, best of <span class="dv">3</span>: <span class="fl">9.85</span> ms per loop</a>
<a class="sourceLine" id="cb157-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> l <span class="op">=</span> [<span class="st">&quot;xyz&quot;</span>]<span class="op">*</span><span class="dv">100000</span></a>
<a class="sourceLine" id="cb157-10" data-line-number="10"><span class="op">&gt;&gt;&gt;</span> timeit(convert_list_to_string(l, <span class="dv">100000</span>)) <span class="co"># Linear increase</span></a>
<a class="sourceLine" id="cb157-11" data-line-number="11"><span class="dv">1000</span> loops, best of <span class="dv">3</span>: <span class="dv">723</span> µs per loop</a></code></pre></div>
<h4 id="explanation-49">💡 Explanation</h4>
<ul>
<li>You can read more about <a href="https://docs.python.org/3/library/timeit.html">timeit</a> from here. It is generally used to measure the execution time of snippets.</li>
<li>Don’t use <code>+</code> for generating long strings — In Python, <code>str</code> is immutable, so the left and right strings have to be copied into the new string for every pair of concatenations. If you concatenate four strings of length 10, you’ll be copying (10+10) + ((10+10)+10) + (((10+10)+10)+10) = 90 characters instead of just 40 characters. Things get quadratically worse as the number and size of the string increases (justified with the execution times of <code>add_bytes_with_plus</code> function)</li>
<li>Therefore, it’s advised to use <code>.format.</code> or <code>%</code> syntax (however, they are slightly slower than <code>+</code> for short strings).</li>
<li>Or better, if already you’ve contents available in the form of an iterable object, then use <code>''.join(iterable_object)</code> which is much faster.</li>
<li><p><code>add_string_with_plus</code> didn’t show a quadratic increase in execution time unlike <code>add_bytes_with_plus</code> because of the <code>+=</code> optimizations discussed in the previous example. Had the statement been <code>s = s + &quot;x&quot; + &quot;y&quot; + &quot;z&quot;</code> instead of <code>s += &quot;xyz&quot;</code>, the increase would have been quadratic.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="kw">def</span> add_string_with_plus(iters):</a>
<a class="sourceLine" id="cb158-2" data-line-number="2">    s <span class="op">=</span> <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb158-3" data-line-number="3">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(iters):</a>
<a class="sourceLine" id="cb158-4" data-line-number="4">        s <span class="op">=</span> s <span class="op">+</span> <span class="st">&quot;x&quot;</span> <span class="op">+</span> <span class="st">&quot;y&quot;</span> <span class="op">+</span> <span class="st">&quot;z&quot;</span></a>
<a class="sourceLine" id="cb158-5" data-line-number="5">    <span class="cf">assert</span> <span class="bu">len</span>(s) <span class="op">==</span> <span class="dv">3</span><span class="op">*</span>iters</a>
<a class="sourceLine" id="cb158-6" data-line-number="6"></a>
<a class="sourceLine" id="cb158-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_plus(<span class="dv">10000</span>))</a>
<a class="sourceLine" id="cb158-8" data-line-number="8"><span class="dv">100</span> loops, best of <span class="dv">3</span>: <span class="fl">9.87</span> ms per loop</a>
<a class="sourceLine" id="cb158-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> timeit(add_string_with_plus(<span class="dv">100000</span>)) <span class="co"># Quadratic increase in execution time</span></a>
<a class="sourceLine" id="cb158-10" data-line-number="10"><span class="dv">1</span> loops, best of <span class="dv">3</span>: <span class="fl">1.09</span> s per loop</a></code></pre></div></li>
</ul>
<hr />
<h3 id="explicit-typecast-of-strings">▶ Explicit typecast of strings</h3>
<div class="sourceCode" id="cb159"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb159-1" data-line-number="1">a <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;inf&#39;</span>)</a>
<a class="sourceLine" id="cb159-2" data-line-number="2">b <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;nan&#39;</span>)</a>
<a class="sourceLine" id="cb159-3" data-line-number="3">c <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;-iNf&#39;</span>)  <span class="co">#These strings are case-insensitive</span></a>
<a class="sourceLine" id="cb159-4" data-line-number="4">d <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;nan&#39;</span>)</a></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a</a>
<a class="sourceLine" id="cb160-2" data-line-number="2">inf</a>
<a class="sourceLine" id="cb160-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> b</a>
<a class="sourceLine" id="cb160-4" data-line-number="4">nan</a>
<a class="sourceLine" id="cb160-5" data-line-number="5"><span class="op">&gt;&gt;&gt;</span> c</a>
<a class="sourceLine" id="cb160-6" data-line-number="6"><span class="op">-</span>inf</a>
<a class="sourceLine" id="cb160-7" data-line-number="7"><span class="op">&gt;&gt;&gt;</span> <span class="bu">float</span>(<span class="st">&#39;some_other_string&#39;</span>)</a>
<a class="sourceLine" id="cb160-8" data-line-number="8"><span class="pp">ValueError</span>: could <span class="kw">not</span> convert string to <span class="bu">float</span>: some_other_string</a>
<a class="sourceLine" id="cb160-9" data-line-number="9"><span class="op">&gt;&gt;&gt;</span> a <span class="op">==</span> <span class="op">-</span>c <span class="co">#inf==inf</span></a>
<a class="sourceLine" id="cb160-10" data-line-number="10"><span class="va">True</span></a>
<a class="sourceLine" id="cb160-11" data-line-number="11"><span class="op">&gt;&gt;&gt;</span> <span class="va">None</span> <span class="op">==</span> <span class="va">None</span> <span class="co"># None==None</span></a>
<a class="sourceLine" id="cb160-12" data-line-number="12"><span class="va">True</span></a>
<a class="sourceLine" id="cb160-13" data-line-number="13"><span class="op">&gt;&gt;&gt;</span> b <span class="op">==</span> d <span class="co">#but nan!=nan</span></a>
<a class="sourceLine" id="cb160-14" data-line-number="14"><span class="va">False</span></a>
<a class="sourceLine" id="cb160-15" data-line-number="15"><span class="op">&gt;&gt;&gt;</span> <span class="dv">50</span><span class="op">/</span>a</a>
<a class="sourceLine" id="cb160-16" data-line-number="16"><span class="fl">0.0</span></a>
<a class="sourceLine" id="cb160-17" data-line-number="17"><span class="op">&gt;&gt;&gt;</span> a<span class="op">/</span>a</a>
<a class="sourceLine" id="cb160-18" data-line-number="18">nan</a>
<a class="sourceLine" id="cb160-19" data-line-number="19"><span class="op">&gt;&gt;&gt;</span> <span class="dv">23</span> <span class="op">+</span> b</a>
<a class="sourceLine" id="cb160-20" data-line-number="20">nan</a></code></pre></div>
<h4 id="explanation-50">💡 Explanation:</h4>
<p><code>'inf'</code> and <code>'nan'</code> are special strings (case-insensitive), which when explicitly typecasted to <code>float</code> type, are used to represent mathematical “infinity” and “not a number” respectively.</p>
<hr />
<h3 id="minor-ones">▶ Minor Ones</h3>
<ul>
<li><p><code>join()</code> is a string operation instead of list operation. (sort of counter-intuitive at first usage)</p>
<p><strong>💡 Explanation:</strong> If <code>join()</code> is a method on a string then it can operate on any iterable (list, tuple, iterators). If it were a method on a list, it’d have to be implemented separately by every type. Also, it doesn’t make much sense to put a string-specific method on a generic <code>list</code> object API.</p></li>
<li>Few weird looking but semantically correct statements:
<ul>
<li><code>[] = ()</code> is a semantically correct statement (unpacking an empty <code>tuple</code> into an empty <code>list</code>)</li>
<li><code>'a'[0][0][0][0][0]</code> is also a semantically correct statement as strings are <a href="https://docs.python.org/3/glossary.html#term-sequence">sequences</a>(iterables supporting element access using integer indices) in Python.</li>
<li><code>3 --0-- 5 == 8</code> and <code>--5 == 5</code> are both semantically correct statements and evaluate to <code>True</code>.</li>
</ul></li>
<li><p>Given that <code>a</code> is a number, <code>++a</code> and <code>--a</code> are both valid Python statements but don’t behave the same way as compared with similar statements in languages like C, C++ or Java.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb161-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb161-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> a</a>
<a class="sourceLine" id="cb161-3" data-line-number="3"><span class="dv">5</span></a>
<a class="sourceLine" id="cb161-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> <span class="op">++</span>a</a>
<a class="sourceLine" id="cb161-5" data-line-number="5"><span class="dv">5</span></a>
<a class="sourceLine" id="cb161-6" data-line-number="6"><span class="op">&gt;&gt;&gt;</span> <span class="op">--</span>a</a>
<a class="sourceLine" id="cb161-7" data-line-number="7"><span class="dv">5</span></a></code></pre></div>
<strong>💡 Explanation:</strong>
<ul>
<li>There is no <code>++</code> operator in Python grammar. It is actually two <code>+</code> operators.</li>
<li><code>++a</code> parses as <code>+(+a)</code> which translates to <code>a</code>. Similarly, the output of the statement <code>--a</code> can be justified.</li>
<li>This StackOverflow <a href="https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python">thread</a> discusses the rationale behind the absence of increment and decrement operators in Python.</li>
</ul></li>
<li><p>Python uses 2 bytes for local variable storage in functions. In theory, this means that only 65536 variables can be defined in a function. However, python has a handy solution built in that can be used to store more than 2^16 variable names. The following code demonstrates what happens in the stack when more than 65536 local variables are defined (Warning: This code prints around 2^18 lines of text, so be prepared!): ```py import dis exec(“”&quot; def f(): “”&quot; + “”&quot; “”“.join([“X”+str(x)+“=” + str(x) for x in range(65539)]))</p>
<p>f()</p>
<p>print(dis.dis(f)) ```</p></li>
<li><p>Multiple Python threads won’t run your <em>Python code</em> concurrently (yes you heard it right!). It may seem intuitive to spawn several threads and let them execute your Python code concurrently, but, because of the <a href="https://wiki.python.org/moin/GlobalInterpreterLock">Global Interpreter Lock</a> in Python, all you’re doing is making your threads execute on the same core turn by turn. Python threads are good for IO-bound tasks, but to achieve actual parallelization in Python for CPU-bound tasks, you might want to use the Python <a href="https://docs.python.org/2/library/multiprocessing.html">multiprocessing</a> module.</p></li>
<li><p>List slicing with out of the bounds indices throws no errors</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> some_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</a>
<a class="sourceLine" id="cb162-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> some_list[<span class="dv">111</span>:]</a>
<a class="sourceLine" id="cb162-3" data-line-number="3">[]</a></code></pre></div></li>
<li><p><code>int('١٢٣٤٥٦٧٨٩')</code> returns <code>123456789</code> in Python 3. In Python, Decimal characters include digit characters, and all characters that can be used to form decimal-radix numbers, e.g. U+0660, ARABIC-INDIC DIGIT ZERO. Here’s an <a href="http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/">interesting story</a> related to this behavior of Python.</p></li>
<li><p><code>'abc'.count('') == 4</code>. Here’s an approximate implementation of <code>count</code> method, which would make the things more clear</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="kw">def</span> count(s, sub):</a>
<a class="sourceLine" id="cb163-2" data-line-number="2">    result <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb163-3" data-line-number="3">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(s) <span class="op">+</span> <span class="dv">1</span> <span class="op">-</span> <span class="bu">len</span>(sub)):</a>
<a class="sourceLine" id="cb163-4" data-line-number="4">        result <span class="op">+=</span> (s[i:i <span class="op">+</span> <span class="bu">len</span>(sub)] <span class="op">==</span> sub)</a>
<a class="sourceLine" id="cb163-5" data-line-number="5">    <span class="cf">return</span> result</a></code></pre></div>
<p>The behavior is due to the matching of empty substring(<code>''</code>) with slices of length 0 in the original string.</p></li>
</ul>
<hr />
<h1 id="contributing">Contributing</h1>
<p>All patches are Welcome! Please see <a href="/CONTRIBUTING.md">CONTRIBUTING.md</a> for further details.</p>
<p>For discussions, you can either create a new <a href="https://github.com/satwikkansal/wtfpython/issues/new">issue</a> or ping on the Gitter <a href="https://gitter.im/wtfpython/Lobby">channel</a></p>
<h1 id="acknowledgements">Acknowledgements</h1>
<p>The idea and design for this collection were initially inspired by Denys Dovhan’s awesome project <a href="https://github.com/denysdovhan/wtfjs">wtfjs</a>. The overwhelming support by the community gave it the shape it is in right now.</p>
<h4 id="some-nice-links">Some nice Links!</h4>
<ul>
<li>https://www.youtube.com/watch?v=sH4XF6pKKmk</li>
<li>https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python</li>
<li>https://sopython.com/wiki/Common_Gotchas_In_Python</li>
<li>https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines</li>
<li>https://stackoverflow.com/questions/1011431/common-pitfalls-in-python</li>
<li>https://www.python.org/doc/humor/</li>
<li>https://www.satwikkansal.xyz/archives/posts/python/My-Python-archives/</li>
</ul>
<h1 id="license">🎓 License</h1>
<p><a href="http://www.wtfpl.net"><img src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square" alt="CC 4.0" /></a></p>
<p>© <a href="https://satwikkansal.xyz">Satwik Kansal</a></p>
<h2 id="help">Help</h2>
<p>If you have any wtfs, ideas or suggestions, please share.</p>
<h2 id="want-to-share-wtfpython-with-friends">Want to share wtfpython with friends?</h2>
<p>You can use these quick links for Twitter and Linkedin.</p>
<p><a href="https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&amp;hastags=python,wtfpython">Twitter</a> | <a href="https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&amp;title=What%20the%20f*ck%20Python!&amp;summary=An%20interesting%20collection%20of%20subtle%20and%20tricky%20Python%20snippets.">Linkedin</a></p>
<h2 id="need-a-pdf-version">Need a pdf version?</h2>
<p>I’ve received a few requests for the pdf version of wtfpython. You can add your details <a href="https://satwikkansal.xyz/wtfpython-pdf/">here</a> to get the pdf as soon as it is finished.</p>
</body>
</html>
